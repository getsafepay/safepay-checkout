!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("safepay",[],n):"object"==typeof exports?exports.safepay=n():e.safepay=n()}("undefined"!=typeof self?self:this,function(){return function(t){var r={};function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)o.d(t,r,function(e){return n[e]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=58)}([function(e,n,t){"use strict";var a=t(7),o=t(3),p=t(1),r=t(9),i=t(15);function c(e){return e.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")}function s(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function u(e,n){if(!n)return e;for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function d(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function f(e,n,t){if(!n)return t;for(var r=n.split("."),o=0;o<r.length;o++){if("object"!=typeof e||null===e)return t;e=e[r[o]]}return void 0===e?t:e}function l(a,c,s){if(void 0===s&&(s=""),Array.isArray(a)){var e=function(){for(var e=a.length,i=[],n=function(o){Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var e=s?s+"."+o:""+o,n=a[o],t=c[typeof n];if(t){var r=t(n,o,e);if(void 0!==r)return i[o]=r,i[o]}return i[o]="object"==typeof n&&null!==n?l(n,c,e):n,i[o]},set:function(e){delete i[o],i[o]=e}})},t=0;t<e;t++)n(t);return{v:i}}();if("object"==typeof e)return e.v}else{if("object"!=typeof a||null===a)throw new Error("Pass an object or array");var n=function(){var i={},e=function(o){if(!a.hasOwnProperty(o))return"continue";Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var e=s?s+"."+o:""+o,n=a[o],t=c[typeof n];if(t){var r=t(n,o,e);if(void 0!==r)return i[o]=r,i[o]}return i[o]="object"==typeof n&&null!==n?l(n,c,e):n,i[o]},set:function(e){delete i[o],i[o]=e}})};for(var n in a)e(n);return{v:i}}();if("object"==typeof n)return n.v}}function h(e,n,t,r){if(e.hasOwnProperty(t)){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o)}else n[t]=r}function m(e,n,t){for(var r in void 0===n&&(n=""),void 0===t&&(t={}),n=n?n+".":n,e)void 0!==e[r]&&null!==e[r]&&"function"!=typeof e[r]&&(e[r]&&Array.isArray(e[r])&&e[r].length&&e[r].every(function(e){return"object"!=typeof e})?t[""+n+r]=e[r].join(","):e[r]&&"object"==typeof e[r]?t=m(e[r],""+n+r,t):t[""+n+r]=e[r].toString());return t}var w=new r.a;function g(e){return"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function v(e){if(e){var n=e.stack,t=e.message;if("string"==typeof n)return n;if("string"==typeof t)return t}return g(e)}function E(){var n={},o={};return{on:function(e,n){var t=o[e]=o[e]||[];t.push(n);var r=!1;return{cancel:function(){r||(r=!0,t.splice(t.indexOf(n),1))}}},once:function(e,n){var t=this.on(e,function(){t.cancel(),n()});return t},trigger:function(e){var n=o[e];if(n)for(var t=0;t<n.length;t++)(0,n[t])()},triggerOnce:function(e){n[e]||(n[e]=!0,this.trigger(e))}}}function y(){}function b(r){var o,i=!1;return function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return i?o:(i=!0,o=r.apply(this,arguments))}}function O(o){var i={};return function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r;try{r=JSON.stringify(Array.prototype.slice.call(arguments),function(e,n){return"function"==typeof n?"zoid:memoize["+function(e){if(null==e||"object"!=typeof e&&"function"!=typeof e)throw new Error("Invalid object");var n=w.get(e);return n||(n=typeof e+":"+d(),w.set(e,n)),n}(n)+"]":n})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}return i.hasOwnProperty(r)||(i[r]=o.apply(this,arguments)),i[r]}}function _(e){return l(e,{function:function(){return{__type__:"__function__"}}})}function T(e,r){return l(e,{object:function(e,n,t){if(e&&"__function__"===e.__type__)return function(){return r({key:n,fullKey:t,self:this,args:arguments})}}})}function S(e,n){e.appendChild(n)}function A(e){if((n=e)instanceof window.Element||null!==n&&"object"==typeof n&&1===n.nodeType&&"object"==typeof n.style&&"object"==typeof n.ownerDocument)return e;var n;if("string"==typeof e){var t=document.getElementById(e);if(t)return t;if(document.querySelector&&(t=document.querySelector(e)),t)return t}}function C(e){var n=A(e);if(n)return n;throw new Error("Can not find element: "+g(e))}var P=new p.a(function(e){if("complete"===window.document.readyState)return e(window.document);var n=setInterval(function(){if("complete"===window.document.readyState)return clearInterval(n),e(window.document)},10)});function L(){return"complete"===window.document.readyState}function j(i){return new p.a(function(e,n){var t=g(i),r=A(i);if(r)return e(r);if(L())return n(new Error("Document is ready and element "+t+" does not exist"));var o=setInterval(function(){return(r=A(i))?(clearInterval(o),e(r)):L()?(clearInterval(o),n(new Error("Document is ready and element "+t+" does not exist"))):void 0},10)})}function x(e,n){var t,r=Object.keys(n).map(function(e){if(n[e])return e+"="+g(n[e])}).filter(Boolean).join(",");try{t=window.open(e,n.name,r,!0)}catch(e){throw new i.b("Can not open popup window - "+(e.stack||e.message))}if(Object(o.isWindowClosed)(t))throw new i.b("Can not open popup window - blocked");return t}function I(n,t){try{n.document.open(),n.document.write(t),n.document.close()}catch(e){try{n.location="javascript: document.open(); document.write("+JSON.stringify(t)+"); document.close();"}catch(e){}}}function D(e,n){var t=n.tagName.toLowerCase();if("html"!==t)throw new Error("Expected element to be html, got "+t);for(var r=e.document.documentElement;r.children&&r.children.length;)r.removeChild(r.children[0]);for(;n.children.length;)r.appendChild(n.children[0])}function N(e,n,t){void 0===t&&(t=window.document),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(t.createTextNode(n))}var R=new r.a;function k(r){if(R.has(r)){var e=R.get(r);if(e)return e}var n=new p.a(function(n,t){r.addEventListener("load",function(){Object(o.linkFrameWindow)(r),n(r)}),r.addEventListener("error",function(e){r.contentWindow?n(r):t(e)})});return R.set(r,n),n}function W(e){return e.contentWindow?p.a.resolve(e.contentWindow):k(e).then(function(e){if(!e.contentWindow)throw new Error("Could not find window in iframe");return e.contentWindow})}function M(e,n){void 0===e&&(e={});var t=C(n),r=e.attributes||{},o=e.style||{},i=function(e,n,t){void 0===e&&(e="div"),void 0===n&&(n={}),e=e.toLowerCase();var r=document.createElement(e);if(n.style&&u(r.style,n.style),n.class&&(r.className=n.class.join(" ")),n.attributes)for(var o=0,i=Object.keys(n.attributes);o<i.length;o++){var a=i[o];r.setAttribute(a,n.attributes[a])}if(n.styleSheet&&N(r,n.styleSheet),n.html){if("iframe"===e)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");r.innerHTML=n.html}return r}("iframe",{attributes:Object(a.a)({frameBorder:"0",allowTransparency:"true"},r),style:Object(a.a)({backgroundColor:"transparent"},o),html:e.html,class:e.class});return k(i),t.appendChild(i),(e.url||window.navigator.userAgent.match(/MSIE|Edge/i))&&i.setAttribute("src",e.url||"about:blank"),i}function U(e,n,t){return e.addEventListener(n,t),{cancel:function(){e.removeEventListener(n,t)}}}var B=O(function(e){var n={};if(!e)return n;if(-1===e.indexOf("="))throw new Error("Can not parse query string params: "+e);for(var t=0,r=e.split("&");t<r.length;t++){var o=r[t];(o=o.split("="))[0]&&o[1]&&(n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return n});function G(e,n){return void 0===n&&(n={}),n&&Object.keys(n).length?(void 0===(t=Object(a.a)({},B(e),n))&&(t={}),Object.keys(t).filter(function(e){return"string"==typeof t[e]}).map(function(e){return c(e)+"="+c(t[e])}).join("&")):e;var t}function F(e,n){void 0===n&&(n={});var t,r,o=n.query||{},i=n.hash||{},a=e.split("#");t=a[0],r=a[1];var c=t.split("?");t=c[0];var s=G(c[1],o),u=G(r,i);return s&&(t=t+"?"+s),u&&(t=t+"#"+u),t}function z(a,c){return void 0===c&&(c=5e3),new p.a(function(n,e){var t,r,o=C(a),i=o.getBoundingClientRect();t=setInterval(function(){var e=o.getBoundingClientRect();if(i.top===e.top&&i.bottom===e.bottom&&i.left===e.left&&i.right===e.right&&i.width===e.width&&i.height===e.height)return clearTimeout(r),clearInterval(t),n();i=e},50),r=setTimeout(function(){clearInterval(t),e(new Error("Timed out waiting for element to stop animating after "+c+"ms"))},c)})}function H(e){return{width:e.offsetWidth,height:e.offsetHeight}}function q(e,n){void 0===n&&(n="auto");var t=e.style,r=t.overflow,o=t.overflowX,i=t.overflowY;return e.style.overflow=e.style.overflowX=e.style.overflowY=n,{reset:function(){e.style.overflow=r,e.style.overflowX=o,e.style.overflowY=i}}}function X(d,e){var n=e.width,f=void 0===n||n,t=e.height,l=void 0===t||t,r=e.threshold,p=void 0===r?0:r,h=H(d);return{check:function(){var e,n,t,r,o,i,a,c,s,u=H(d);return{changed:(e=h,n=u,t={width:f,height:l,threshold:p},r=t.width,o=void 0===r||r,i=t.height,a=void 0===i||i,c=t.threshold,s=void 0===c?0:c,!!(o&&Math.abs(e.width-n.width)>s)||!!(a&&Math.abs(e.height-n.height)>s)),dimensions:u}},reset:function(){h=H(d)}}}function Y(e,n){var t=n.width,s=void 0===t||t,r=n.height,u=void 0===r||r,o=n.delay,d=void 0===o?50:o,i=n.threshold,f=void 0===i?0:i;return new p.a(function(n){var t,r,o,i,a=X(e,{width:s,height:u,threshold:f}),c=(r=function(e){return clearInterval(t),n(e)},void 0===(o=4*d)&&(o=100),function(){var e=this,n=arguments;clearTimeout(i),i=setTimeout(function(){return r.apply(e,n)},o)});t=setInterval(function(){var e=a.check(),n=e.changed,t=e.dimensions;if(n)return a.reset(),c(t)},d),window.addEventListener("resize",function e(){var n=a.check(),t=n.changed,r=n.dimensions;t&&(a.reset(),window.removeEventListener("resize",e),c(r))})})}function V(e,n){var t=n.width,r=n.height,o=H(e);return!(t&&o.width!==window.innerWidth||r&&o.height!==window.innerHeight)}function Z(t,r,o){o=b(o);for(var e=0;e<r.length;e++){var n=r[e];t.addEventListener(n,o)}return{cancel:b(function(){for(var e=0;e<r.length;e++){var n=r[e];t.removeEventListener(n,o)}})}}var J=["webkit","moz","ms","o"];function K(e,n,t){e.style[n]=t;for(var r,o=(r=n).charAt(0).toUpperCase()+r.slice(1).toLowerCase(),i=0;i<J.length;i++){var a=J[i];e.style[""+a+o]=t}}var $=window.CSSRule,Q=$.KEYFRAMES_RULE||$.WEBKIT_KEYFRAMES_RULE||$.MOZ_KEYFRAMES_RULE||$.O_KEYFRAMES_RULE||$.MS_KEYFRAMES_RULE,ee=["animationstart","webkitAnimationStart","oAnimationStart","MSAnimationStart"],ne=["animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"];function te(u,d,f,l){return void 0===l&&(l=1e3),new p.a(function(n,t){var c=C(u);if(!c||!function(e,n){var t=c.ownerDocument.styleSheets;try{for(var r=0;r<t.length;r++){var o=t[r].cssRules;if(o)for(var i=0;i<o.length;i++){var a=o[i];if(a&&a.type===Q&&a.name===n)return!0}}}catch(e){return!1}return!1}(0,d))return n();var r,o,i,e,a=!1;function s(){K(c,"animationName",""),clearTimeout(r),clearTimeout(o),i.cancel(),e.cancel()}i=Z(c,ee,function(e){e.target===c&&e.animationName===d&&(clearTimeout(r),e.stopPropagation(),i.cancel(),a=!0,o=setTimeout(function(){s(),n()},l))}),e=Z(c,ne,function(e){if(e.target===c&&e.animationName===d)return s(),"string"==typeof e.animationName&&e.animationName!==d?t("Expected animation name to be "+d+", found "+e.animationName):n()}),K(c,"animationName",d),r=setTimeout(function(){if(!a)return s(),n()},200),f&&f(s)})}var re={DISPLAY:{NONE:"none",BLOCK:"block"},VISIBILITY:{VISIBLE:"visible",HIDDEN:"hidden"},IMPORTANT:"important"};function oe(e){e.style.setProperty("display","")}function ie(e){e.style.setProperty("display",re.DISPLAY.NONE,re.IMPORTANT)}function ae(e){e.parentNode&&e.parentNode.removeChild(e)}function ce(e,n,t){var r=te(e,n,t);return oe(e),r}function se(e,n,t){return te(e,n,t).then(function(){ie(e)})}function ue(e,n){e.classList?e.classList.add(n):-1===e.className.split(/\s+/).indexOf(n)&&(e.className+=" "+n)}function de(e,n){e.classList?e.classList.remove(n):-1!==e.className.split(/\s+/).indexOf(n)&&(e.className=e.className.replace(n,""))}function fe(){return console.warn("Do not use zoid.getCurrentScriptDir() in production -- browser support is limited"),document.currentScript?document.currentScript.src.split("/").slice(0,-1).join("/"):"."}function le(e){return!e||!e.parentNode}function pe(e,n){var t,r,o;return n=b(n),le(e)?n():(r=function(){le(e)&&(t.cancel(),n())},50,o=setTimeout(function e(){o=setTimeout(e,50),r.call()},50),t={cancel:function(){clearTimeout(o)}}),{cancel:function(){t&&t.cancel()}}}function he(e){return"text/html",r=e,new p.a(function(e,n){var t=new window.XMLHttpRequest;t.open("GET",r),t.setRequestHeader("Accept","text/html"),t.send(null),t.onload=function(){e(t.responseText)},t.onerror=function(){return n(new Error("prefetch failed"))}});var r}var me={onClick:"click"};function we(e,n){void 0===n&&(n=window.document);for(var t=0,r=(a=e,Array.prototype.slice.call(a.querySelectorAll("script")));t<r.length;t++){var o=r[t],i=n.createElement("script");i.text=o.textContent,o.parentNode.replaceChild(i,o)}var a}function ge(e,n,t){e=e.toLowerCase();var r=this&&this.createElement?this:window.document,o=r.createElement(e);for(var i in n)i in me?o.addEventListener(me[i],n[i]):"innerHTML"===i?(o.innerHTML=n[i],we(o,r)):o.setAttribute(i,n[i]);if("style"===e){if("string"!=typeof t)throw new TypeError("Expected "+e+" tag content to be string, got "+typeof t);if(3<arguments.length)throw new Error("Expected only text content for "+e+" tag");N(o,t,r)}else if("iframe"===e){if(3<arguments.length)throw new Error("Expected only single child node for iframe");o.addEventListener("load",function(){var e=o.contentWindow;if(!e)throw new Error("Expected frame to have contentWindow");"string"==typeof t?I(e,t):D(e,t)})}else if("script"===e){if("string"!=typeof t)throw new TypeError("Expected "+e+" tag content to be string, got "+typeof t);if(3<arguments.length)throw new Error("Expected only text content for "+e+" tag");o.text=t}else for(var a=2;a<arguments.length;a++)if("string"==typeof arguments[a]){var c=r.createTextNode(arguments[a]);S(o,c)}else S(o,arguments[a]);return o}function ve(o){return function(){var e=this,n=Array.prototype.slice.call(arguments);return n.length>=o.length?p.a.resolve(o.apply(e,n)):new p.a(function(t,r){n.push(function(e,n){if(e&&!(e instanceof Error))throw new Error("Passed non-Error object in callback: [ "+e+" ] -- callbacks should either be called with callback(new Error(...)) or callback(null, result).");return e?r(e):t(n)}),o.apply(e,n)})}}function Ee(t){return function(){var e=this,n=arguments;return p.a.try(function(){return t.apply(e,n)})}}function ye(e){return p.a.try(e).then(function(){return ye(e)})}function be(e){return"string"==typeof e&&/^[0-9]+%$/.test(e)}function Oe(e){return"string"==typeof e&&/^[0-9]+px$/.test(e)}function _e(e){if("number"==typeof e)return e;var n=e.match(/^([0-9]+)(px|%)$/);if(!n)throw new Error("Could not match css value from "+e);return parseInt(n[1],10)}function Te(e){return _e(e)+"px"}function Se(e){return"number"==typeof e?Te(e):be(e)?e:Te(e)}function Ae(e,n){if("number"==typeof e)return e;if(be(e))return parseInt(n*_e(e)/100,10);if(Oe(e))return _e(e);throw new Error("Can not normalize dimension: "+e)}function Ce(e,n,t){var r=t.value;t.value=function(){return this.__memoized__=this.__memoized__||{},this.__memoized__.hasOwnProperty(n)||(this.__memoized__[n]=r.apply(this,arguments)),this.__memoized__[n]},t.value.displayName=n+":memoized"}var Pe=t(8),Le=t(14);function je(e){if(-1===Le.e.indexOf(e))throw new Error("Invalid logLevel: "+e);Le.a.logLevel=e,Pe.CONFIG.LOG_LEVEL=e,window.LOG_LEVEL=e}function xe(e,n,t){void 0===t&&(t={}),Object(Le.d)("xc_"+e+"_"+n,t)}function Ie(e,n,t){void 0===t&&(t={}),Object(Le.f)("xc_"+e+"_"+n,t)}function De(e,n,t){void 0===t&&(t={}),Object(Le.b)("xc_"+e+"_"+n,t)}var Ne=t(2);function Re(e){if(Object(o.isSameDomain)(e))return e[Ne.__ZOID__]||(e[Ne.__ZOID__]={}),e[Ne.__ZOID__]}var ke=function(){var e=Re(window);if(!e)throw new Error("Could not get local global");return e}();t.d(n,"d",function(){return S}),t.d(n,"x",function(){return C}),t.d(n,"n",function(){return P}),t.d(n,"p",function(){return j}),t.d(n,"M",function(){return x}),t.d(n,"eb",function(){return I}),t.d(n,"db",function(){return D}),t.d(n,"e",function(){return k}),t.d(n,"f",function(){return W}),t.d(n,"B",function(){return M}),t.d(n,"b",function(){return U}),t.d(n,"u",function(){return F}),t.d(n,"q",function(){return z}),t.d(n,"T",function(){return q}),t.d(n,"Z",function(){return X}),t.d(n,"K",function(){return Y}),t.d(n,"m",function(){return V}),t.d(n,"V",function(){return oe}),t.d(n,"A",function(){return ie}),t.d(n,"l",function(){return ae}),t.d(n,"U",function(){return ce}),t.d(n,"c",function(){return se}),t.d(n,"a",function(){return ue}),t.d(n,"P",function(){return de}),t.d(n,"w",function(){return fe}),t.d(n,"cb",function(){return pe}),t.d(n,"N",function(){return he}),t.d(n,"F",function(){return ge}),t.d(n,"I",function(){return y}),t.d(n,"L",function(){return b}),t.d(n,"G",function(){return O}),t.d(n,"R",function(){return _}),t.d(n,"k",function(){return T}),t.d(n,"j",function(){return ve}),t.d(n,"O",function(){return Ee}),t.d(n,"h",function(){return ye}),t.d(n,"i",function(){return s}),t.d(n,"t",function(){return u}),t.d(n,"ab",function(){return d}),t.d(n,"v",function(){return f}),t.d(n,"Q",function(){return l}),t.d(n,"g",function(){return h}),t.d(n,"o",function(){return m}),t.d(n,"W",function(){return g}),t.d(n,"X",function(){return v}),t.d(n,"s",function(){return E}),t.d(n,"D",function(){return be}),t.d(n,"E",function(){return Oe}),t.d(n,"Y",function(){return Se}),t.d(n,"J",function(){return Ae}),t.d(n,"H",function(){return Ce}),t.d(n,"S",function(){return je}),t.d(n,"C",function(){return xe}),t.d(n,"bb",function(){return Ie}),t.d(n,"r",function(){return De}),t.d(n,"z",function(){return Re}),t.d(n,"y",function(){return ke})},function(e,n,t){"use strict";function f(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var n={}.toString;if(n){var t=n.call(e);if("[object Window]"===t||"[object global]"===t||"[object DOMWindow]"===t)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}function r(){var e;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");e=window}var n=e.__zalgopromise__=e.__zalgopromise__||{};return n.flushPromises=n.flushPromises||[],n.activeCount=n.activeCount||0,n.possiblyUnhandledPromiseHandlers=n.possiblyUnhandledPromiseHandlers||[],n.dispatchedErrors=n.dispatchedErrors||[],n}var o=function(){function d(e){var n=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var t,r,o=!1,i=!1,a=!1;try{e(function(e){a?n.resolve(e):(o=!0,t=e)},function(e){a?n.reject(e):(i=!0,r=e)})}catch(e){return void this.reject(e)}a=!0,o?this.resolve(t):i&&this.reject(r)}}var e=d.prototype;return e.resolve=function(e){if(this.resolved||this.rejected)return this;if(f(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.reject=function(e){var n=this;if(this.resolved||this.rejected)return this;if(f(e))throw new Error("Can not reject promise with another promise");if(!e){var t=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+t)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){n.errorHandled||function(e,n){if(-1===r().dispatchedErrors.indexOf(e)){r().dispatchedErrors.push(e),setTimeout(function(){throw e},1);for(var t=0;t<r().possiblyUnhandledPromiseHandlers.length;t++)r().possiblyUnhandledPromiseHandlers[t](e,n)}}(e,n)},1),this.dispatch(),this},e.asyncReject=function(e){this.errorHandled=!0,this.reject(e)},e.dispatch=function(){var a=this,e=this.dispatching,c=this.resolved,s=this.rejected,u=this.handlers;if(!e&&(c||s)){this.dispatching=!0,r().activeCount+=1;for(var n=function(e){var n=u[e],t=n.onSuccess,r=n.onError,o=n.promise,i=void 0;if(c)try{i=t?t(a.value):a.value}catch(e){return o.reject(e),"continue"}else if(s){if(!r)return o.reject(a.error),"continue";try{i=r(a.error)}catch(e){return o.reject(e),"continue"}}i instanceof d&&(i.resolved||i.rejected)?(i.resolved?o.resolve(i.value):o.reject(i.error),i.errorHandled=!0):f(i)?i instanceof d&&(i.resolved||i.rejected)?i.resolved?o.resolve(i.value):o.reject(i.error):i.then(function(e){o.resolve(e)},function(e){o.reject(e)}):o.resolve(i)},t=0;t<u.length;t++)n(t);u.length=0,this.dispatching=!1,r().activeCount-=1,0===r().activeCount&&d.flushQueue()}},e.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var t=new d;return this.handlers.push({promise:t,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),t},e.catch=function(e){return this.then(void 0,e)},e.finally=function(n){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return d.try(n).then(function(){return e})},function(e){return d.try(n).then(function(){throw e})})},e.timeout=function(e,n){var t=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){t.resolved||t.rejected||t.reject(n||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(r),e})},e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},d.resolve=function(t){return t instanceof d?t:f(t)?new d(function(e,n){return t.then(e,n)}):(new d).resolve(t)},d.reject=function(e){return(new d).reject(e)},d.all=function(t){var r=new d,o=t.length,i=[];if(!o)return r.resolve(i),r;for(var e=function(n){var e=t[n];if(e instanceof d){if(e.resolved)return i[n]=e.value,o-=1,"continue"}else if(!f(e))return i[n]=e,o-=1,"continue";d.resolve(e).then(function(e){i[n]=e,0==(o-=1)&&r.resolve(i)},function(e){r.reject(e)})},n=0;n<t.length;n++)e(n);return 0===o&&r.resolve(i),r},d.hash=function(e){var t={};return d.all(Object.keys(e).map(function(n){return d.resolve(e[n]).then(function(e){t[n]=e})})).then(function(){return t})},d.map=function(e,n){return d.all(e.map(n))},d.onPossiblyUnhandledException=function(e){return n=e,r().possiblyUnhandledPromiseHandlers.push(n),{cancel:function(){r().possiblyUnhandledPromiseHandlers.splice(r().possiblyUnhandledPromiseHandlers.indexOf(n),1)}};var n},d.try=function(e,n,t){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var r;try{r=e.apply(n,t||[])}catch(e){return d.reject(e)}return d.resolve(r)},d.delay=function(n){return new d(function(e){setTimeout(e,n)})},d.isPromise=function(e){return!!(e&&e instanceof d)||f(e)},d.flush=function(){var e=new d;return r().flushPromises.push(e),0===r().activeCount&&d.flushQueue(),e},d.flushQueue=function(){var e=r().flushPromises;r().flushPromises=[];for(var n=0;n<e.length;n++)e[n].resolve()},d}();t.d(n,"a",function(){return o})},function(e,n,t){"use strict";t.r(n),t.d(n,"ZOID",function(){return r}),t.d(n,"__ZOID__",function(){return o}),t.d(n,"POST_MESSAGE",function(){return i}),t.d(n,"PROP_TYPES",function(){return a}),t.d(n,"INITIAL_PROPS",function(){return c}),t.d(n,"WINDOW_REFERENCES",function(){return s}),t.d(n,"PROP_TYPES_LIST",function(){return u}),t.d(n,"CONTEXT_TYPES",function(){return d}),t.d(n,"CLASS_NAMES",function(){return f}),t.d(n,"EVENTS",function(){return l}),t.d(n,"ATTRIBUTES",function(){return p}),t.d(n,"ANIMATION_NAMES",function(){return h}),t.d(n,"EVENT_NAMES",function(){return m}),t.d(n,"CLOSE_REASONS",function(){return w}),t.d(n,"CONTEXT_TYPES_LIST",function(){return g}),t.d(n,"DELEGATE",function(){return v}),t.d(n,"WILDCARD",function(){return E}),t.d(n,"DEFAULT_DIMENSIONS",function(){return y});var r="zoid",o="__"+r+"__",i={INIT:r+"_init",PROPS:r+"_props",PROP_CALLBACK:r+"_prop_callback",CLOSE:r+"_close",CHECK_CLOSE:r+"_check_close",REDIRECT:r+"_redirect",RESIZE:r+"_resize",ONRESIZE:r+"_onresize",DELEGATE:r+"_delegate",ALLOW_DELEGATE:r+"_allow_delegate",ERROR:r+"_error",HIDE:r+"_hide",SHOW:r+"_show"},a={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number"},c={RAW:"raw",UID:"uid"},s={OPENER:"opener",TOP:"top",PARENT:"parent",GLOBAL:"global"},u=Object.keys(a).map(function(e){return a[e]}),d={IFRAME:"iframe",POPUP:"popup"},f={ZOID:""+r,OUTLET:r+"-outlet",COMPONENT_FRAME:r+"-component-frame",PRERENDER_FRAME:r+"-prerender-frame",VISIBLE:r+"-visible",INVISIBLE:r+"-invisible"},l={CLOSE:r+"-close"},p={IFRAME_PLACEHOLDER:"data-zoid-"+r+"-placeholder"},h={SHOW_CONTAINER:r+"-show-container",SHOW_COMPONENT:r+"-show-component",HIDE_CONTAINER:r+"-hide-container",HIDE_COMPONENT:r+"-hide-component"},m={CLICK:"click"},w={PARENT_CALL:"parent_call",CHILD_CALL:"child_call",CLOSE_DETECTED:"close_detected",USER_CLOSED:"user_closed",PARENT_CLOSE_DETECTED:"parent_close_detected"},g=Object.keys(d).map(function(e){return d[e]}),v={CALL_ORIGINAL:"call_original",CALL_DELEGATE:"call_delegate"},E="*",y={WIDTH:300,HEIGHT:150}},function(e,n,t){"use strict";var r=t(36);t.d(n,"findFrameByName",function(){return r.a}),t.d(n,"getActualDomain",function(){return r.b}),t.d(n,"getAllFramesInWindow",function(){return r.c}),t.d(n,"getAncestor",function(){return r.d}),t.d(n,"getDistanceFromTop",function(){return r.e}),t.d(n,"getDomain",function(){return r.f}),t.d(n,"getDomainFromUrl",function(){return r.g}),t.d(n,"getFrameByName",function(){return r.h}),t.d(n,"getFrames",function(){return r.i}),t.d(n,"getNthParentFromTop",function(){return r.j}),t.d(n,"getOpener",function(){return r.k}),t.d(n,"getParent",function(){return r.l}),t.d(n,"getTop",function(){return r.m}),t.d(n,"getUserAgent",function(){return r.n}),t.d(n,"isActuallySameDomain",function(){return r.o}),t.d(n,"isAncestor",function(){return r.p}),t.d(n,"isIframe",function(){return r.q}),t.d(n,"isOpener",function(){return r.r}),t.d(n,"isPopup",function(){return r.s}),t.d(n,"isSameDomain",function(){return r.t}),t.d(n,"isSameTopWindow",function(){return r.u}),t.d(n,"isTop",function(){return r.v}),t.d(n,"isWindow",function(){return r.w}),t.d(n,"isWindowClosed",function(){return r.x}),t.d(n,"linkFrameWindow",function(){return r.y}),t.d(n,"matchDomain",function(){return r.z}),t.d(n,"onCloseWindow",function(){return r.A}),t.d(n,"stringifyDomainPattern",function(){return r.B}),t(21)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5),o=window[r.b.WINDOW_PROPS.POSTROBOT]=window[r.b.WINDOW_PROPS.POSTROBOT]||{};o.registerSelf=function(){}},function(e,n,t){"use strict";var r,o={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"},i={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},a=(Object.keys(i).map(function(e){return i[e]}),{ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(r={},r[o.SEND_STRATEGIES.POST_MESSAGE]=!0,r[o.SEND_STRATEGIES.BRIDGE]=!0,r[o.SEND_STRATEGIES.GLOBAL]=!0,r),ALLOW_SAME_ORIGIN:!1});0===window.location.href.indexOf(o.FILE_PROTOCOL)&&(a.ALLOW_POSTMESSAGE_POPUP=!0),t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},function(e,n,t){"use strict";var o=t(9),a=t(3),h=t(5);function m(e,n){if(void 0===n&&(n=1),3<=n)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var t=e&&e.stack,r=e&&e.message;if(t&&r)return-1!==t.indexOf(r)?t:r+"\n"+t;if(t)return t;if(r)return r}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}catch(e){return"Error while stringifying error: "+m(e,n+1)}}var r=function(e){if(!e)return e;var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}};function i(){}function c(e,n,t){return e.addEventListener?e.addEventListener(n,t):e.attachEvent("on"+n,t),{cancel:function(){e.removeEventListener?e.removeEventListener(n,t):e.detachEvent("on"+n,t)}}}function s(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function u(e,r,o){if(void 0===o&&(o=1),100<=o)throw new Error("Self-referential object passed, or object contained too many layers");var i,n,t;if("object"!=typeof e||null===e||Array.isArray(e)){if(!Array.isArray(e))throw new TypeError("Invalid type: "+typeof e);i=[]}else i={};return n=e,t=function(e,n){var t=r(e,n);i[n]=void 0!==t?t:"object"==typeof e&&null!==e?u(e,r,o+1):e},Array.isArray(n)?function(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}(n,t):"object"==typeof n&&null!==n&&function(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)}(n,t),i}function d(n,t){var r;return r=setTimeout(function e(){r=setTimeout(e,t),n.call()},t),{cancel:function(){clearTimeout(r)}}}function w(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var f=function(t){var r=new o.a;return function(e){var n=r.get(e);return void 0!==n||void 0!==(n=t.call(this,e))&&r.set(e,n),n}};function l(){return Object(a.isPopup)()?h.b.WINDOW_TYPES.POPUP:Object(a.isIframe)()?h.b.WINDOW_TYPES.IFRAME:h.b.WINDOW_TYPES.FULLPAGE}function p(e,n,t){var r,o;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,n,t);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i}function g(e){return JSON.parse(e)}function v(){return!!Object(a.getUserAgent)(window).match(/MSIE|trident|edge\/12|edge\/13/i)||!h.a.ALLOW_POSTMESSAGE_POPUP}var E=t(1),y=t(4);y.a.methods=y.a.methods||new o.a;var b=r(function(){y.a.on(h.b.POST_MESSAGE_NAMES.METHOD,{origin:h.b.WILDCARD},function(e){var n=e.source,t=e.origin,r=e.data,o=y.a.methods.get(n);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[r.id];if(!i)throw new Error("Could not find method with id: "+r.id);if(!Object(a.matchDomain)(i.domain,t))throw new Error("Method domain "+i.domain+" does not match origin "+t);return E.a.try(function(){return i.method.apply({source:n,origin:t,data:r},r.args)}).then(function(e){return{result:e,id:r.id,name:r.name}})})});function O(e,n){return"object"==typeof e&&null!==e&&e.__type__===n}function _(e,n,t,r){var o=s(),i=y.a.methods.get(e);return i||(i={},y.a.methods.set(e,i)),i[o]={domain:n,method:t},{__type__:h.b.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function T(l,p,e){return u({obj:e},function(e,n){return"function"==typeof e?_(l,p,e,n.toString()):e instanceof Error?(t=e,{__type__:h.b.SERIALIZATION_TYPES.ERROR,__message__:m(t),__code__:t.code}):window.Promise&&e instanceof window.Promise?(r=l,o=p,i=e,a=n.toString(),{__type__:h.b.SERIALIZATION_TYPES.PROMISE,__then__:_(r,o,function(e,n){return i.then(e,n)},a+".then")}):E.a.isPromise(e)?(c=l,s=p,u=e,d=n.toString(),{__type__:h.b.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:_(c,s,function(e,n){return u.then(e,n)},d+".then")}):w(e)?(f=e,{__type__:h.b.SERIALIZATION_TYPES.REGEX,__source__:f.source}):void 0;var t,r,o,i,a,c,s,u,d,f}).obj}function S(n,t,r){function e(){var e=Array.prototype.slice.call(arguments);return y.a.send(n,h.b.POST_MESSAGE_NAMES.METHOD,{id:r.__id__,name:r.__name__,args:e},{domain:t,timeout:-1}).then(function(e){return e.data.result},function(e){throw e})}return e.__name__=r.__name__,e.__xdomain__=!0,e.source=n,e.origin=t,e}function A(t,r,o){return new E.a(function(e,n){return S(t,r,o.__then__)(e,n)})}function C(a,c,e){return u({obj:e},function(e){var n,t,r,o,i;if("object"==typeof e&&null!==e)return O(e,h.b.SERIALIZATION_TYPES.METHOD)?S(a,c,e):O(e,h.b.SERIALIZATION_TYPES.ERROR)?(n=e,t=new Error(n.__message__),n.__code__&&(t.code=n.__code__),t):O(e,h.b.SERIALIZATION_TYPES.PROMISE)?(r=a,o=c,i=e,window.Promise?new window.Promise(function(e,n){return S(r,o,i.__then__)(e,n)}):A(r,o,i)):O(e,h.b.SERIALIZATION_TYPES.ZALGO_PROMISE)?A(a,c,e):O(e,h.b.SERIALIZATION_TYPES.REGEX)?new RegExp(e.__source__):void 0}).obj}function P(e){return y.a.send(e,h.b.POST_MESSAGE_NAMES.HELLO,{},{domain:h.b.WILDCARD,timeout:-1}).then(function(e){return{origin:e.origin}})}function L(){var r;r=function(e){var n=e.source,t=e.origin,r=y.a.readyPromises.get(n)||new E.a;r.resolve({origin:t}),y.a.readyPromises.set(n,r)},y.a.on(h.b.POST_MESSAGE_NAMES.HELLO,{domain:h.b.WILDCARD},function(e){var n=e.source,t=e.origin;return r({source:n,origin:t})});var e=Object(a.getAncestor)();e&&P(e).catch(i)}function j(e,n,t){void 0===n&&(n=5e3),void 0===t&&(t="Window");var r=y.a.readyPromises.get(e);return r||(r=new E.a,y.a.readyPromises.set(e,r),-1!==n&&setTimeout(function(){return r.reject(new Error(t+" did not load after "+n+"ms"))},n),r)}y.a.readyPromises=y.a.readyPromises||new o.a,t.d(n,"p",function(){return m}),t.d(n,"l",function(){return r}),t.d(n,"j",function(){return i}),t.d(n,"a",function(){return c}),t.d(n,"q",function(){return s}),t.d(n,"m",function(){return d}),t.d(n,"e",function(){return w}),t.d(n,"r",function(){return f}),t.d(n,"c",function(){return l}),t.d(n,"g",function(){return p}),t.d(n,"f",function(){return g}),t.d(n,"i",function(){return v}),t.d(n,"h",function(){return b}),t.d(n,"o",function(){return T}),t.d(n,"b",function(){return C}),t.d(n,"n",function(){return P}),t.d(n,"d",function(){return L}),t.d(n,"k",function(){return j})},function(e,n,t){"use strict";function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}t.d(n,"a",function(){return r})},function(e,n,r){"use strict";r.r(n);var t={};r.r(t),r.d(t,"cleanUpWindow",function(){return k}),r.d(t,"Promise",function(){return g.a}),r.d(t,"bridge",function(){return W}),r.d(t,"init",function(){return M}),r.d(t,"parent",function(){return R}),r.d(t,"request",function(){return y}),r.d(t,"send",function(){return C}),r.d(t,"sendToParent",function(){return P}),r.d(t,"client",function(){return L}),r.d(t,"listen",function(){return j}),r.d(t,"on",function(){return x}),r.d(t,"once",function(){return I}),r.d(t,"listener",function(){return D}),r.d(t,"CONFIG",function(){return O.a}),r.d(t,"CONSTANTS",function(){return O.b}),r.d(t,"disable",function(){return N});var b=r(6),w=r(3),O=r(5),_=r(4),c=r(7),g=r(1),s={};s[O.b.SEND_STRATEGIES.POST_MESSAGE]=function(n,t,e){try{r(37).emulateIERestrictions(window,n)}catch(e){return}(Array.isArray(e)?e:"string"==typeof e?[e]:[O.b.WILDCARD]).map(function(e){if(0!==e.indexOf(O.b.MOCK_PROTOCOL))return 0===e.indexOf(O.b.FILE_PROTOCOL)?O.b.WILDCARD:e;if(window.location.protocol===O.b.FILE_PROTOCOL)return O.b.WILDCARD;if(!Object(w.isActuallySameDomain)(n))throw new Error("Attempting to send messsage to mock domain "+e+", but window is actually cross-domain");return Object(w.getActualDomain)(n)}).forEach(function(e){return n.postMessage(t,e)})};var o=r(11),i=o.sendBridgeMessage,a=o.needsBridgeForBrowser,u=o.isBridge;function v(o,i,a){return g.a.try(function(){var e;if(i=function(e,n,t){void 0===t&&(t={});var r=Object(b.q)(),o=Object(b.c)(),i=Object(w.getDomain)(window);return Object(c.a)({},n,t,{sourceDomain:i,id:n.id||r,windowType:o})}(0,i,{data:Object(b.o)(o,a,i.data),domain:a}),o===window&&!O.a.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if(Object(w.isWindowClosed)(o))throw new Error("Window is closed");var r=[],t=Object(b.g)(((e={})[O.b.WINDOW_PROPS.POSTROBOT]=i,e),null,2);return g.a.map(Object.keys(s),function(n){return g.a.try(function(){if(!O.a.ALLOWED_POST_MESSAGE_METHODS[n])throw new Error("Strategy disallowed: "+n);return s[n](o,t,a)}).then(function(){return r.push(n+": success"),!0},function(e){return r.push(n+": "+Object(b.p)(e)+"\n"),!1})}).then(function(e){var n=e.some(Boolean),t=i.type+" "+i.name+" "+(n?"success":"error")+":\n  - "+r.join("\n  - ")+"\n";if(!n)throw new Error(t)})})}s[O.b.SEND_STRATEGIES.BRIDGE]=function(e,n,t){if(a()||u()){if(Object(w.isSameDomain)(e))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==Object(w.isSameTopWindow)(window,e))throw new Error("Can only use bridge to communicate between two different windows, not between frames");return i(e,n,t)}},s[O.b.SEND_STRATEGIES.GLOBAL]=function(e,n){if(Object(b.i)()){if(!Object(w.isSameDomain)(e))throw new Error("Post message through global disabled between different domain windows");if(!1!==Object(w.isSameTopWindow)(window,e))throw new Error("Can only use global to communicate between two different windows, not between frames");var t=e[O.b.WINDOW_PROPS.POSTROBOT];if(!t)throw new Error("Can not find postRobot global on foreign window");return t.receiveMessage({source:window,origin:Object(w.getDomain)(),data:n})}};var T=r(9);_.a.responseListeners=_.a.responseListeners||{},_.a.requestListeners=_.a.requestListeners||{},_.a.WINDOW_WILDCARD=_.a.WINDOW_WILDCARD||new function(){},_.a.erroredResponseListeners=_.a.erroredResponseListeners||{};var d,S="__domain_regex__";function f(e){return _.a.responseListeners[e]}function E(e){delete _.a.responseListeners[e]}function l(e){return Boolean(_.a.erroredResponseListeners[e])}function A(e){var n=e.name,t=e.win,r=e.domain;if(t===O.b.WILDCARD&&(t=null),r===O.b.WILDCARD&&(r=null),!n)throw new Error("Name required to get request listener");var o=_.a.requestListeners[n];if(o)for(var i=0,a=[t,_.a.WINDOW_WILDCARD];i<a.length;i++){var c=a[i],s=c&&o.get(c);if(s){if(r&&"string"==typeof r){if(s[r])return s[r];if(s[S])for(var u=0,d=s[S];u<d.length;u++){var f=d[u],l=f.regex,p=f.listener;if(Object(w.matchDomain)(l,r))return p}}if(s[O.b.WILDCARD])return s[O.b.WILDCARD]}}}var p=((d={})[O.b.POST_MESSAGE_TYPE.ACK]=function(e,n,t){if(!l(t.hash)){var r=f(t.hash);if(!r)throw new Error("No handler found for post message ack for message: "+t.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(w.matchDomain)(r.domain,n))throw new Error("Ack origin "+n+" does not match domain "+r.domain.toString());r.ack=!0}},d[O.b.POST_MESSAGE_TYPE.REQUEST]=function(n,t,r){var o=A({name:r.name,win:n,domain:t});function i(e){return r.fireAndForget||Object(w.isWindowClosed)(n)?g.a.resolve():v(n,Object(c.a)({target:r.originalSource,hash:r.hash,name:r.name},e),t)}return g.a.all([i({type:O.b.POST_MESSAGE_TYPE.ACK}),g.a.try(function(){if(!o)throw new Error("No handler found for post message: "+r.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(w.matchDomain)(o.domain,t))throw new Error("Request origin "+t+" does not match domain "+o.domain.toString());var e=r.data;return o.handler({source:n,origin:t,data:e})}).then(function(e){return i({type:O.b.POST_MESSAGE_TYPE.RESPONSE,ack:O.b.POST_MESSAGE_ACK.SUCCESS,data:e})},function(e){var n=Object(b.p)(e).replace(/^Error: /,""),t=e.code;return i({type:O.b.POST_MESSAGE_TYPE.RESPONSE,ack:O.b.POST_MESSAGE_ACK.ERROR,error:n,code:t})})]).then(b.j).catch(function(e){if(o&&o.handleError)return o.handleError(e);throw e})},d[O.b.POST_MESSAGE_TYPE.RESPONSE]=function(e,n,t){if(!l(t.hash)){var r=f(t.hash);if(!r)throw new Error("No handler found for post message response for message: "+t.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(w.matchDomain)(r.domain,n))throw new Error("Response origin "+n+" does not match domain "+Object(w.stringifyDomainPattern)(r.domain));if(E(t.hash),t.ack===O.b.POST_MESSAGE_ACK.ERROR){var o=new Error(t.error);return t.code&&(o.code=t.code),r.respond(o,null)}if(t.ack===O.b.POST_MESSAGE_ACK.SUCCESS){var i=t.data||t.response;return r.respond(null,{source:e,origin:n,data:i})}}},d);function h(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var n=e.source,t=e.origin,r=function(e){var n;try{n=Object(b.f)(e)}catch(e){return}if(n&&"object"==typeof n&&null!==n&&(n=n[O.b.WINDOW_PROPS.POSTROBOT])&&"object"==typeof n&&null!==n&&n.type&&"string"==typeof n.type&&p[n.type])return n}(e.data);if(r){if(!r.sourceDomain||"string"!=typeof r.sourceDomain)throw new Error("Expected message to have sourceDomain");0!==r.sourceDomain.indexOf(O.b.MOCK_PROTOCOL)&&0!==r.sourceDomain.indexOf(O.b.FILE_PROTOCOL)||(t=r.sourceDomain),-1===_.a.receivedMessages.indexOf(r.id)&&(_.a.receivedMessages.push(r.id),Object(w.isWindowClosed)(n)&&!r.fireAndForget||(r.data&&(r.data=Object(b.b)(n,t,r.data)),p[r.type](n,t,r)))}}function m(e){try{Object(b.j)(e.source)}catch(e){return}var n={source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data};try{r(37).emulateIERestrictions(n.source,window)}catch(e){return}h(n)}function y(m){return g.a.try(function(){if(!m.name)throw new Error("Expected options.name");var e,t,u=m.name;if("string"==typeof m.window){var n=document.getElementById(m.window);if(!n)throw new Error("Expected options.window "+Object.prototype.toString.call(m.window)+" to be a valid element id");if("iframe"!==n.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(m.window)+" to be an iframe");if(!n.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e=n.contentWindow}else if(m.window instanceof HTMLIFrameElement){if("iframe"!==m.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(m.window)+" to be an iframe");if(m.window&&!m.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");m.window&&m.window.contentWindow&&(e=m.window.contentWindow)}else e=m.window;if(!e)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var d=e;t=m.domain||O.b.WILDCARD;var f=m.name+"_"+Object(b.q)();if(Object(w.isWindowClosed)(d))throw new Error("Target window is closed");var l=!1,p=_.a.requestPromises.get(d);p||(p=[],_.a.requestPromises.set(d,p));var h=g.a.try(function(){if(Object(w.isAncestor)(window,d))return Object(b.k)(d,m.timeout||O.a.CHILD_WINDOW_TIMEOUT)}).then(function(e){var n=(void 0===e?{}:e).origin;if(Object(b.e)(t)&&!n)return Object(b.n)(d)}).then(function(e){var n=(void 0===e?{}:e).origin;if(Object(b.e)(t)){if(!Object(w.matchDomain)(t,n))throw new Error("Remote window domain "+n+" does not match regex: "+t.toString());t=n}if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected domain to be a string or array");var s=t;return new g.a(function(t,r){var n,e,o;if(m.fireAndForget||(e=f,o=n={name:u,window:d,domain:s,respond:function(e,n){e||(l=!0,p.splice(p.indexOf(h,1))),e?r(e):t(n)}},_.a.responseListeners[e]=o),v(d,{type:O.b.POST_MESSAGE_TYPE.REQUEST,hash:f,name:u,data:m.data,fireAndForget:m.fireAndForget},s).catch(r),m.fireAndForget)return t();var i=O.a.ACK_TIMEOUT,a=m.timeout||O.a.RES_TIMEOUT,c=100;setTimeout(function e(){if(!l){if(Object(w.isWindowClosed)(d))return n.ack?r(new Error("Window closed for "+u+" before response")):r(new Error("Window closed for "+u+" before ack"));if(i=Math.max(i-c,0),-1!==a&&(a=Math.max(a-c,0)),n.ack){if(-1===a)return;c=Math.min(a,2e3)}else{if(0===i)return r(new Error("No ack for postMessage "+u+" in "+Object(w.getDomain)()+" in "+O.a.ACK_TIMEOUT+"ms"));if(0===a)return r(new Error("No response for postMessage "+u+" in "+Object(w.getDomain)()+" in "+(m.timeout||O.a.RES_TIMEOUT)+"ms"))}setTimeout(e,c)}},c)})});return h.catch(function(){var e;e=f,_.a.erroredResponseListeners[e]=!0,E(f)}),p.push(h),h})}function C(e,n,t,r){return(r=r||{}).window=e,r.name=n,r.data=t,y(r)}function P(e,n,t){var r=Object(w.getAncestor)();return r?C(r,e,n,t):new g.a(function(e,n){return n(new Error("Window does not have a parent"))})}function L(t){if(void 0===t&&(t={}),!t.window)throw new Error("Expected options.window");var r=t.window;return{send:function(e,n){return C(r,e,n,t)}}}function j(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var n=e.name,t=e.window,r=e.domain,o={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:t,domain:r||O.b.WILDCARD,name:n},i=function e(n,t){var r=n.name,o=n.win,i=n.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],c=0,s=o;c<s.length;c++){var u=s[c];a.push(e({name:r,domain:i,win:u},t))}return{cancel:function(){for(var e=0;e<a.length;e++)a[e].cancel()}}}if(Array.isArray(i)){for(var d=[],f=0,l=i;f<l.length;f++){var p=l[f];d.push(e({name:r,win:o,domain:p},t))}return{cancel:function(){for(var e=0;e<d.length;e++)d[e].cancel()}}}var h=A({name:r,win:o,domain:i});if(o&&o!==O.b.WILDCARD||(o=_.a.WINDOW_WILDCARD),i=i||O.b.WILDCARD,h)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===_.a.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===_.a.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var m=_.a.requestListeners,w=m[r];w||(w=new T.a,m[r]=w);var g=w.get(o);g||(g={},w.set(o,g));var v,E=i.toString(),y=g[S];return Object(b.e)(i)?(y||(y=[],g[S]=y),v={regex:i,listener:t},y.push(v)):g[E]=t,{cancel:function(){g&&(delete g[E],o&&0===Object.keys(g).length&&w.delete(o),v&&y.splice(y.indexOf(v,1)))}}}({name:n,win:t,domain:r},o);if(e.once){var a=o.handler;o.handler=Object(b.l)(function(){return i.cancel(),a.apply(this,arguments)})}if(o.window&&e.errorOnClose)var c=Object(b.m)(function(){t&&"object"==typeof t&&Object(w.isWindowClosed)(t)&&(c.cancel(),o.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){i.cancel()}}}function x(e,n,t){return"function"==typeof n&&(t=n,n={}),(n=n||{}).name=e,n.handler=t||n.handler,j(n)}function I(e,r,o){void 0===r&&(r={}),"function"==typeof r&&(o=r,r={}),r=r||{},o=o||r.handler;var i=r.errorHandler,n=new g.a(function(n,t){(r=r||{}).name=e,r.once=!0,r.handler=function(e){if(n(e),o)return o(e)},r.errorHandler=function(e){if(t(e),i)return i(e)}}),t=j(r);return n.cancel=t.cancel,n}function D(t){return void 0===t&&(t={}),{on:function(e,n){return x(e,t,n)}}}function N(){delete window[O.b.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",m)}_.a.receivedMessages=_.a.receivedMessages||[],_.a.receiveMessage=h,_.a.requestPromises=_.a.requestPromises||new T.a,_.a.send=C,_.a.on=x;var R=Object(w.getAncestor)();function k(e){var n=_.a.requestPromises.get(e);if(n)for(var t=0;t<n.length;t++)n[t].reject(new Error("No response from window - cleaned up"));_.a.popupWindowsByWin&&_.a.popupWindowsByWin.delete(e),_.a.remoteWindows&&_.a.remoteWindows.delete(e),_.a.requestPromises.delete(e),_.a.methods.delete(e),_.a.readyPromises.delete(e)}var W=r(38);function M(){_.a.initialized||(Object(b.a)(window,"message",m),r(11).openTunnelToOpener(),Object(b.d)(),Object(b.h)({on:x,send:C})),_.a.initialized=!0}M(),r.d(n,"cleanUpWindow",function(){return k}),r.d(n,"Promise",function(){return g.a}),r.d(n,"bridge",function(){return W}),r.d(n,"init",function(){return M}),r.d(n,"parent",function(){return R}),r.d(n,"request",function(){return y}),r.d(n,"send",function(){return C}),r.d(n,"sendToParent",function(){return P}),r.d(n,"client",function(){return L}),r.d(n,"listen",function(){return j}),r.d(n,"on",function(){return x}),r.d(n,"once",function(){return I}),r.d(n,"listener",function(){return D}),r.d(n,"CONFIG",function(){return O.a}),r.d(n,"CONSTANTS",function(){return O.b}),r.d(n,"disable",function(){return N}),n.default=t},function(e,n,t){"use strict";var r={};t.r(r),t.d(r,"WeakMap",function(){return a});var o=t(3);function s(e,n){for(var t=0;t<e.length;t++)try{if(e[t]===n)return t}catch(e){}return-1}var u=Object.defineProperty,i=Date.now()%1e9,a=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,i+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+i,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var e=new WeakMap,n={},t="__testvalue__";return Object.freeze(n),e.set(n,t),e.get(n)===t}catch(e){return!1}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}var n=e.prototype;return n._cleanupClosedWindows=function(){for(var e=this.weakmap,n=this.keys,t=0;t<n.length;t++){var r=n[t];if(Object(o.isWindow)(r)&&Object(o.isWindowClosed)(r)){if(e)try{e.delete(r)}catch(e){}n.splice(t,1),this.values.splice(t,1),t-=1}}},n.isSafeToReadWrite=function(e){if(Object(o.isWindow)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0},n.set=function(e,n){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.set(e,n)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,o=e[r];o&&o[0]===e?o[1]=n:u(e,r,{value:[e,n],writable:!0})}else{this._cleanupClosedWindows();var i=this.keys,a=this.values,c=s(i,e);-1===c?(i.push(e),a.push(n)):a[c]=n}},n.get=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return n.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var t=s(this.keys,e);if(-1===t)return;return this.values[t]}var r=e[this.name];if(r&&r[0]===e)return r[1]},n.delete=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];t&&t[0]===e&&(t[0]=t[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,o=s(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))}},n.has=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{return n.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];return!(!t||t[0]!==e)}return this._cleanupClosedWindows(),-1!==s(this.keys,e)},n.getOrSet=function(e,n){if(this.has(e))return this.get(e);var t=n();return this.set(e,t),t},e}();t.d(n,"a",function(){return a})},function(e,n,t){"use strict";var r,o,i,a=t(20),c=t.n(a),s=function(){function e(){}var n=e.prototype;return n.post=function(e,n,t){return void 0===n&&(n={}),void 0===t&&(t={}),c()({method:"post",data:n,url:e,headers:t}).catch(this.handleError)},n.get=function(e,n,t){return void 0===n&&(n={}),void 0===t&&(t={}),c()({method:"get",params:n,headers:t,url:e}).catch(this.handleError)},n.handleError=function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)},e}(),u={LOCAL:"local",DEV:"dev",SANDBOX:"sandbox",PRODUCTION:"production"},d={env:u.LOCAL,checkoutUris:(r={},r[u.LOCAL]="/checkout",r[u.DEV]="/checkout",r[u.SANDBOX]="/checkout",r[u.PRODUCTION]="/checkout",r),buttonUris:(o={},o[u.LOCAL]="",o[u.DEV]="/button",o[u.SANDBOX]="/button",o[u.PRODUCTION]="/button",o),postBridgeUris:(i={},i[u.LOCAL]="?xcomponent=1",i[u.DEV]="/bridge?xcomponent=1",i[u.SANDBOX]="/bridge?xcomponent=1",i[u.PRODUCTION]="/bridge?xcomponent=1",i),paymentApiUri:"/v1/init",get safepayDomains(){var e;return(e={})[u.LOCAL]="http://localhost:3000",e[u.DEV]="https://dev.api.getsafepay.com",e[u.SANDBOX]="https://sandbox.api.getsafepay.com",e[u.PRODUCTION]="https://getsafepay.com",e},get buttonDomains(){var e;return(e={})[u.LOCAL]="http://localhost:3000",e[u.DEV]="https://dev.api.getsafepay.com",e[u.SANDBOX]="https://sandbox.api.getsafepay.com",e[u.PRODUCTION]="https://getsafepay.com",e},get checkoutDomains(){var e;return(e={})[u.LOCAL]="http://localhost:3001",e[u.DEV]="https://dev.api.getsafepay.com",e[u.SANDBOX]="https://sandbox.api.getsafepay.com",e[u.PRODUCTION]="https://getsafepay.com",e},get bridgeDomains(){var e;return(e={})[u.LOCAL]="http://localhost:3020",e[u.DEV]="https://dev.api.getsafepay.com",e[u.SANDBOX]="https://sandbox.api.getsafepay.com",e[u.PRODUCTION]="https://getsafepay.com",e},get checkoutUrls(){var e,n=d.checkoutDomains,t=d.checkoutUris;return(e={})[u.LOCAL]=""+n.local+t.local,e[u.DEV]=""+n.dev+t.dev,e[u.SANDBOX]=""+n.sandbox+t.sandbox,e[u.PRODUCTION]=""+n.production+t.production,e},get buttonUrls(){var e,n=d.buttonDomains,t=d.buttonUris;return(e={})[u.LOCAL]=""+n.local+t.local,e[u.DEV]=""+n.dev+t.dev,e[u.SANDBOX]=""+n.sandbox+t.sandbox,e[u.PRODUCTION]=""+n.production+t.production,e},get metaFrameUrls(){var e,n=d.bridgeDomains,t=d.postBridgeUris;return(e={})[u.LOCAL]=""+n.local+t.local,e[u.DEV]=""+n.dev+t.dev,e[u.SANDBOX]=""+n.sandbox+t.sandbox,e[u.PRODUCTION]=""+n.production+t.production,e},get orderApiUrls(){var e;return(e={})[u.LOCAL]="http://localhost:4010",e[u.DEV]="https://dev.api.getsafepay.com/order",e[u.SANDBOX]="https://sandbox.api.getsafepay.com/order",e[u.PRODUCTION]="https://api.getsafepay.com/order",e},get paymentApiUrls(){var e,n=d.orderApiUrls,t=d.paymentApiUri;return(e={})[u.LOCAL]=""+n.local+t,e[u.DEV]=""+n.dev+t,e[u.SANDBOX]=""+n.sandbox+t,e[u.PRODUCTION]=""+n.production+t,e}},f=t(1),l={payment:{create:function(e,n,t){void 0===e&&(e="local"),void 0===n&&(n=""),void 0===t&&(t={});var r=t.transaction;if(r){var o=r.amount,i=r.currency;if(o&&i)return(new s).post(d.paymentApiUrls[e],{environment:e,client:n,amount:o}).then(function(e){return e.data.data}).then(function(e){return e.token}).catch(function(e){return console.log(e),e});f.a.reject(new Error("Expected amount and currency to be passed"))}else f.a.reject(new Error("Expected payment details to be passed"))}}};t.d(n,"c",function(){return l}),t.d(n,"a",function(){return d}),t.d(n,"b",function(){return u})},function(e,n,t){"use strict";t.r(n);var l=t(3),p=t(5),h=t(6),m=t(4);function w(e){try{m.a.tunnelWindows[e]&&delete m.a.tunnelWindows[e].source}catch(e){}delete m.a.tunnelWindows[e]}m.a.tunnelWindows=m.a.tunnelWindows||{},m.a.tunnelWindowId=0,m.a.openTunnelToParent=function(e){var n=e.name,t=e.source,r=e.canary,o=e.sendMessage,i=Object(l.getParent)(window);if(!i)throw new Error("No parent window found to open tunnel to");var a,c,s,u,d,f=(c=(a={name:n,source:t,canary:r,sendMessage:o}).name,s=a.source,u=a.canary,d=a.sendMessage,function(){for(var e=m.a.tunnelWindows,n=0,t=Object.keys(e);n<t.length;n++){var r=t[n],o=e[r];try{Object(h.j)(o.source)}catch(e){w(r);continue}Object(l.isWindowClosed)(o.source)&&w(r)}}(),m.a.tunnelWindowId+=1,m.a.tunnelWindows[m.a.tunnelWindowId]={name:c,source:s,canary:u,sendMessage:d},m.a.tunnelWindowId);return m.a.send(i,p.b.POST_MESSAGE_NAMES.OPEN_TUNNEL,{name:n,sendMessage:function(){var e,n=(e=f,m.a.tunnelWindows[e]);try{Object(h.j)(n&&n.source)}catch(e){return void w(f)}if(n&&n.source&&!Object(l.isWindowClosed)(n.source)){try{n.canary()}catch(e){return}n.sendMessage.apply(this,arguments)}}},{domain:p.b.WILDCARD})};var c=t(1),r=t(9);function o(){return!!Object(l.getUserAgent)(window).match(/MSIE|trident|edge\/12|edge\/13/i)||!p.a.ALLOW_POSTMESSAGE_POPUP}function i(e){return!Object(l.isSameTopWindow)(window,e)}function a(e,n){if(e){if(Object(l.getDomain)()!==Object(l.getDomainFromUrl)(e))return!0}else if(n&&!Object(l.isSameDomain)(n))return!0;return!1}function s(e){var n=e.win,t=e.domain;return!(!o()||t&&!a(t,n)||n&&!i(n))}function u(e){var n=(e=e||Object(l.getDomainFromUrl)(e)).replace(/[^a-zA-Z0-9]+/g,"_");return p.b.BRIDGE_NAME_PREFIX+"_"+n}function d(){return Boolean(window.name&&window.name===u(Object(l.getDomain)()))}var f=new c.a(function(e){if(window.document&&window.document.body)return e(window.document.body);var n=setInterval(function(){if(window.document&&window.document.body)return clearInterval(n),e(window.document.body)},10)});function g(e){m.a.remoteWindows.set(e,{sendMessagePromise:new c.a})}function v(e){return m.a.remoteWindows.get(e)}function E(r,o,i){var e=v(r);if(!e)throw new Error("Window not found to register sendMessage to");var n=function(e,n,t){if(e!==r)throw new Error("Remote window does not match window");if(!Object(l.matchDomain)(t,o))throw new Error("Remote domain "+t+" does not match domain "+o);i(n)};e.sendMessagePromise.resolve(n),e.sendMessagePromise=c.a.resolve(n)}function y(e,n){var t=v(e);if(!t)throw new Error("Window not found on which to reject sendMessage");t.sendMessagePromise.asyncReject(n)}function b(n,t,r){var e=Object(l.isOpener)(window,n),o=Object(l.isOpener)(n,window);if(!e&&!o)throw new Error("Can only send messages to and from parent and popup windows");var i=v(n);if(!i)throw new Error("Window not found to send message to");return i.sendMessagePromise.then(function(e){return e(n,t,r)})}m.a.remoteWindows=m.a.remoteWindows||new r.a;var O=Object(h.r)(function(o){return c.a.try(function(){for(var e=0,n=Object(l.getFrames)(o);e<n.length;e++){var t=n[e];try{if(t&&t!==window&&Object(l.isSameDomain)(t)&&t[p.b.WINDOW_PROPS.POSTROBOT])return t}catch(e){continue}}try{var r=Object(l.getFrameByName)(o,u(Object(l.getDomain)()));if(!r)return;return Object(l.isSameDomain)(r)&&r[p.b.WINDOW_PROPS.POSTROBOT]?r:new c.a(function(e){var n,t;n=setInterval(function(){if(r&&Object(l.isSameDomain)(r)&&r[p.b.WINDOW_PROPS.POSTROBOT])return clearInterval(n),clearTimeout(t),e(r)},100),t=setTimeout(function(){return clearInterval(n),e()},2e3)})}catch(e){}})});function _(){return c.a.try(function(){var o=Object(l.getOpener)(window);if(o&&s({win:o}))return g(o),O(o).then(function(e){return e?window.name?e[p.b.WINDOW_PROPS.POSTROBOT].openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(e){try{Object(h.j)(window)}catch(e){return}if(window&&!window.closed)try{m.a.receiveMessage({data:e,origin:this.origin,source:this.source})}catch(e){c.a.reject(e)}}}).then(function(e){var n=e.source,t=e.origin,r=e.data;if(n!==o)throw new Error("Source does not match opener");E(n,t,r.sendMessage)}).catch(function(e){throw y(o,e),e}):y(o,new Error("Can not register with opener: window does not have a name")):y(o,new Error("Can not register with opener: no bridge found in opener"))})})}function T(e,n){return n=n||Object(l.getDomainFromUrl)(e),Boolean(m.a.bridges[n])}function S(i,a){return a=a||Object(l.getDomainFromUrl)(i),m.a.bridges[a]||(m.a.bridges[a]=c.a.try(function(){if(Object(l.getDomain)()===a)throw new Error("Can not open bridge on the same domain as current domain: "+a);var e=u(a);if(Object(l.getFrameByName)(window,e))throw new Error("Frame with name "+e+" already exists on page");var n,t,r,o=(n=e,t=i,(r=document.createElement("iframe")).setAttribute("name",n),r.setAttribute("id",n),r.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),r.setAttribute("frameborder","0"),r.setAttribute("border","0"),r.setAttribute("scrolling","no"),r.setAttribute("allowTransparency","true"),r.setAttribute("tabindex","-1"),r.setAttribute("hidden","true"),r.setAttribute("title",""),r.setAttribute("role","presentation"),r.src=t,r);return m.a.bridgeFrames[a]=o,f.then(function(e){e.appendChild(o);var n,r,t=o.contentWindow;return n=t,r=a,m.a.on(p.b.POST_MESSAGE_NAMES.OPEN_TUNNEL,{window:n,domain:r},function(e){var n=e.origin,t=e.data;if(n!==r)throw new Error("Domain "+r+" does not match origin "+n);if(!t.name)throw new Error("Register window expected to be passed window name");if(!t.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!m.a.popupWindowsByName[t.name])throw new Error("Window with name "+t.name+" does not exist, or was not opened by this window");if(!m.a.popupWindowsByName[t.name].domain)throw new Error("We do not have a registered domain for window "+t.name);if(m.a.popupWindowsByName[t.name].domain!==n)throw new Error("Message origin "+n+" does not matched registered window origin "+m.a.popupWindowsByName[t.name].domain);return E(m.a.popupWindowsByName[t.name].win,r,t.sendMessage),{sendMessage:function(e){if(window&&!window.closed){var n=m.a.popupWindowsByName[t.name];if(n)try{m.a.receiveMessage({data:e,origin:n.domain,source:n.win})}catch(e){c.a.reject(e)}}}}}),new c.a(function(e,n){o.onload=e,o.onerror=n}).then(function(){return Object(h.k)(t,p.a.BRIDGE_TIMEOUT,"Bridge "+i)}).then(function(){return t})})})),m.a.bridges[a]}m.a.bridges=m.a.bridges||{},m.a.bridgeFrames=m.a.bridgeFrames||{},m.a.popupWindowsByWin=m.a.popupWindowsByWin||new r.a,m.a.popupWindowsByName=m.a.popupWindowsByName||{};var A=window.open;function C(e,n){var t=m.a.popupWindowsByWin.get(e);t&&(t.domain=Object(l.getDomainFromUrl)(n),g(e))}function P(){for(var e=0,n=Object.keys(m.a.bridgeFrames);e<n.length;e++){var t=n[e],r=m.a.bridgeFrames[t];r.parentNode&&r.parentNode.removeChild(r)}m.a.bridgeFrames={},m.a.bridges={}}window.open=function(e,n,t,r){var o=e;if(e&&0===e.indexOf(p.b.MOCK_PROTOCOL)){var i=e.split("|");o=i[0],e=i[1]}o&&(o=Object(l.getDomainFromUrl)(o));var a=A.call(this,e,n,t,r);if(!a)return a;e&&g(a);for(var c=0,s=Object.keys(m.a.popupWindowsByName);c<s.length;c++){var u=s[c];Object(l.isWindowClosed)(m.a.popupWindowsByName[u].win)&&delete m.a.popupWindowsByName[u]}if(n&&a){var d=m.a.popupWindowsByWin.get(a)||m.a.popupWindowsByName[n]||{};d.name=d.name||n,d.win=d.win||a,d.domain=d.domain||o,m.a.popupWindowsByWin.set(a,d),m.a.popupWindowsByName[n]=d}return a},t.d(n,"openTunnelToOpener",function(){return _}),t.d(n,"needsBridgeForBrowser",function(){return o}),t.d(n,"needsBridgeForWin",function(){return i}),t.d(n,"needsBridgeForDomain",function(){return a}),t.d(n,"needsBridge",function(){return s}),t.d(n,"getBridgeName",function(){return u}),t.d(n,"isBridge",function(){return d}),t.d(n,"documentBodyReady",function(){return f}),t.d(n,"registerRemoteWindow",function(){return g}),t.d(n,"findRemoteWindow",function(){return v}),t.d(n,"registerRemoteSendMessage",function(){return E}),t.d(n,"rejectRemoteSendMessage",function(){return y}),t.d(n,"sendBridgeMessage",function(){return b}),t.d(n,"hasBridge",function(){return T}),t.d(n,"openBridge",function(){return S}),t.d(n,"linkUrl",function(){return C}),t.d(n,"destroyBridges",function(){return P})},function(e,n,t){"use strict";var o=t(29),r=t(41),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===i.call(e)}function u(e,n){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var t=0,r=e.length;t<r;t++)n.call(null,e[t],t,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:r,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:s,isStream:function(e){return c(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function t(){var r={};function e(e,n){"object"==typeof r[n]&&"object"==typeof e?r[n]=t(r[n],e):r[n]=e}for(var n=0,o=arguments.length;n<o;n++)u(arguments[n],e);return r},extend:function(t,e,r){return u(e,function(e,n){t[n]=r&&"function"==typeof e?o(e,r):e}),t},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,n,t){"use strict";function r(e,n){e.prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n}t.d(n,"a",function(){return r})},function(e,n,t){"use strict";var r={};t.r(r),t.d(r,"buffer",function(){return g}),t.d(r,"tracking",function(){return v}),t.d(r,"getTransport",function(){return y}),t.d(r,"setTransport",function(){return b}),t.d(r,"print",function(){return _}),t.d(r,"immediateFlush",function(){return T}),t.d(r,"flush",function(){return P}),t.d(r,"log",function(){return j}),t.d(r,"prefix",function(){return x}),t.d(r,"debug",function(){return I}),t.d(r,"info",function(){return D}),t.d(r,"warn",function(){return N}),t.d(r,"error",function(){return R}),t.d(r,"track",function(){return k}),t.d(r,"init",function(){return H}),t.d(r,"startTransition",function(){return Z}),t.d(r,"endTransition",function(){return J}),t.d(r,"transition",function(){return K}),t.d(r,"payloadBuilders",function(){return a}),t.d(r,"metaBuilders",function(){return p}),t.d(r,"trackingBuilders",function(){return c}),t.d(r,"headerBuilders",function(){return h}),t.d(r,"addPayloadBuilder",function(){return s}),t.d(r,"addMetaBuilder",function(){return u}),t.d(r,"addTrackingBuilder",function(){return d}),t.d(r,"addHeaderBuilder",function(){return f}),t.d(r,"config",function(){return m}),t.d(r,"logLevels",function(){return w});var i=t(1);function l(e,n,t){for(var r in void 0===t&&(t=!0),e=e||{},n=n||{})n.hasOwnProperty(r)&&(!t&&e.hasOwnProperty(r)||(e[r]=n[r]));return e}function o(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}var a=[],p=[],c=[],h=[];function s(e){a.push(e)}function u(e){p.push(e)}function d(e){c.push(e)}function f(e){h.push(e)}var m={uri:"",prefix:"",initial_state_name:"init",flushInterval:6e5,debounceInterval:10,sizeLimit:300,silent:!1,heartbeat:!0,heartbeatConsoleLog:!0,heartbeatInterval:5e3,heartbeatTooBusy:!1,heartbeatTooBusyThreshold:1e4,logLevel:"warn",autoLog:["warn","error"],logUnload:!0,logPerformance:!0},w=["error","warn","info","debug"],g=[],v=[],E=function(e,n,r){return function(e,a,c,s,n){void 0===c&&(c={}),void 0===s&&(s={});var t=(void 0===r?{}:r).fireAndForget,u=void 0!==t&&t;return new i.a(function(e){var n,t,r=window.XMLHttpRequest||window.ActiveXObject;if(window.XDomainRequest&&(t=a.match(/https?:\/\/[^/]+/))&&t[0]!==window.location.protocol+"//"+window.location.host){if(n=a,window.location.protocol!==n.split("/")[0])return e();r=window.XDomainRequest}var o=new r("MSXML2.XMLHTTP.3.0");if(o.open("post".toUpperCase(),a,!0),"function"==typeof o.setRequestHeader)for(var i in o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/json"),c)c.hasOwnProperty(i)&&o.setRequestHeader(i,c[i]);u?e():o.onreadystatechange=function(){3<o.readyState&&e()},o.send(JSON.stringify(s).replace(/&/g,"%26"))})}(0,m.uri,e,n)};function y(){return E}function b(e){E=e}var O=!1;function _(e,n,t){if("undefined"!=typeof window&&window.console&&window.console.log){if(!O)return setTimeout(function(){return _(e,n,t)},1);var r=m.logLevel;if(window.LOG_LEVEL&&(r=window.LOG_LEVEL),!(w.indexOf(e)>w.indexOf(r))){t=t||{};var o=[n];Boolean(window.document.documentMode)&&(t=JSON.stringify(t)),o.push(t),(t.error||t.warning)&&o.push("\n\n",t.error||t.warning);try{window.console[e]&&window.console[e].apply?window.console[e].apply(window.console,o):window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,o)}catch(e){}}}}function T(e){var n=(void 0===e?{}:e).fireAndForget,t=void 0!==n&&n;if("undefined"!=typeof window&&m.uri){var r=g.length,o=v.length;if(r||o){for(var i={},a=0;a<p.length;a++){var c=p[a];try{l(i,c(i),!1)}catch(e){console.error("Error in custom meta builder:",e.stack||e.toString())}}for(var s={},u=0;u<h.length;u++){var d=h[u];try{l(s,d(s),!1)}catch(e){console.error("Error in custom header builder:",e.stack||e.toString())}}var f=E(s,{events:g,meta:i,tracking:v},{fireAndForget:t});return g=[],v=[],f}}}setTimeout(function(){O=!0},1);var S,A,C,P=(S=T,A=m.debounceInterval,C={},function(){var t=arguments;return C.timeout&&(clearTimeout(C.timeout),delete C.timeout),C.timeout=setTimeout(function(){var e=C.resolver,n=C.rejector;return delete C.promise,delete C.resolver,delete C.rejector,delete C.timeout,i.a.resolve().then(function(){return S.apply(null,t)}).then(e,n)},A),C.promise=C.promise||new i.a(function(e,n){C.resolver=e,C.rejector=n}),C.promise});function L(e,n,t){g.push({level:e,event:n,payload:t}),-1<m.autoLog.indexOf(e)&&P()}function j(e,n,t){if("undefined"!=typeof window){m.prefix&&(n=m.prefix+"_"+n),"string"==typeof(t=t||{})?t={message:t}:t instanceof Error&&(t={error:t.stack||t.toString()});try{JSON.stringify(t)}catch(e){return}t.timestamp=Date.now();for(var r=0;r<a.length;r++){var o=a[r];try{l(t,o(t),!1)}catch(e){console.error("Error in custom payload builder:",e.stack||e.toString())}}m.silent||_(e,n,t),g.length===m.sizeLimit?L("info","logger_max_buffer_length"):g.length<m.sizeLimit&&L(e,n,t)}}function x(t){return{debug:function(e,n){return j("debug",t+"_"+e,n)},info:function(e,n){return j("info",t+"_"+e,n)},warn:function(e,n){return j("warn",t+"_"+e,n)},error:function(e,n){return j("error",t+"_"+e,n)},track:function(e){return k(e)},flush:function(){return P()}}}function I(e,n){return j("debug",e,n)}function D(e,n){return j("info",e,n)}function N(e,n){return j("warn",e,n)}function R(e,n){return j("error",e,n)}function k(e){if("undefined"!=typeof window&&e){try{JSON.stringify(e)}catch(e){return}for(var n=0;n<c.length;n++){var t=c[n];try{l(e,t(e),!1)}catch(e){console.error("Error in custom tracking builder:",e.stack||e.toString())}}_("debug","tracking",e),v.push(e)}}var W=window&&window.performance&&performance.now&&performance.timing&&performance.timing.connectEnd&&performance.timing.navigationStart&&1e3<Math.abs(performance.now()-Date.now())&&0<performance.now()-(performance.timing.connectEnd-performance.timing.navigationStart);function M(){return W?performance.now():Date.now()}function U(e){return{startTime:e=void 0!==e?e:M(),elapsed:function(){return parseInt(M()-e,10)},reset:function(){e=M()}}}function B(){if(W){var e=window.performance.timing;return parseInt(e.connectEnd-e.navigationStart,10)}}var G=U(),F=U(B()),z=!1;function H(e){var n,t,r,o;l(m,e||{}),z||(z=!0,m.logPerformance&&function(){if(!W)return D("no_performance_data");s(function(){var e={};return e.client_elapsed=G.elapsed(),W&&(e.req_elapsed=F.elapsed()),e}),new i.a(function(e){"undefined"!=typeof document&&"complete"===document.readyState&&e(),window.addEventListener("load",e)}).then(function(){var t={};["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"].forEach(function(e){t[e]=parseInt(window.performance.timing[e],10)||0});var r=t.connectEnd-t.navigationStart;t.connectEnd&&Object.keys(t).forEach(function(e){var n=t[e];n&&D("timing_"+e,{client_elapsed:parseInt(n-t.connectEnd-(G.startTime-r),10),req_elapsed:parseInt(n-t.connectEnd,10)})}),D("timing",t),D("memory",window.performance.memory),D("navigation",window.performance.navigation),window.performance.getEntries&&window.performance.getEntries().forEach(function(e){-1<["link","script","img","css"].indexOf(e.initiatorType)&&D(e.initiatorType,e)})})}(),m.heartbeat&&(r=U(),o=0,n=function(){if(!(m.heartbeatMaxThreshold&&o>m.heartbeatMaxThreshold)){o+=1;var e=r.elapsed(),n=e-m.heartbeatInterval,t={count:o,elapsed:e};m.heartbeatTooBusy&&(t.lag=n)>=m.heartbeatTooBusyThreshold&&D("toobusy",t,m.heartbeatConsoleLog),D("heartbeat",t,m.heartbeatConsoleLog)}},t=m.heartbeatInterval,function e(){setTimeout(function(){n(),e()},t)}()),m.logUnload&&(window.addEventListener("beforeunload",function(){D("window_beforeunload"),T({fireAndForget:!0})}),window.addEventListener("unload",function(){D("window_unload"),T({fireAndForget:!0})})),m.flushInterval&&setInterval(P,m.flushInterval),window.beaverLogQueue&&(window.beaverLogQueue.forEach(function(e){j(e.level,e.event,e)}),delete window.beaverLogQueue))}var q,X=o(),Y=o(),V=m.initial_state_name;function Z(){q=M()}function J(e){q=q||B();var n,t=M();void 0!==q&&(n=parseInt(t-q,0));var r="transition_"+V+"_to_"+e;D(r,{duration:n}),k({transition:r,transition_time:n}),T(),q=t,V=e,Y=o()}function K(e){Z(),J(e)}s(function(){return{windowID:X,pageID:Y}}),u(function(){return{state:"ui_"+V}}),t.d(n,"c",function(){return P}),t.d(n,"d",function(){return D}),t.d(n,"f",function(){return N}),t.d(n,"b",function(){return R}),t.d(n,"a",function(){return m}),t.d(n,"e",function(){return w})},function(e,n,t){"use strict";function r(e){this.message=e}function o(e){this.message=e}function i(e){this.message=e}t.d(n,"b",function(){return r}),t.d(n,"a",function(){return o}),t.d(n,"c",function(){return i}),r.prototype=Object.create(Error.prototype),o.prototype=Object.create(Error.prototype),i.prototype=Object.create(Error.prototype)},function(e,n,t){"use strict";var r=t(22);t.d(n,"script",function(){return r.a});var o=t(23);t.d(n,"react",function(){return o.a});var i=t(24);t.d(n,"vue",function(){return i.a});var a=t(25);t.d(n,"angular",function(){return a.a});var c=t(26);t.o(c,"angular2")&&t.d(n,"angular2",function(){return c.angular2}),t.o(c,"glimmer")&&t.d(n,"glimmer",function(){return c.glimmer});var s=t(27);t.d(n,"glimmer",function(){return s.a});var u=t(28);t.d(n,"angular2",function(){return u.a})},function(e,n,t){"use strict";t(34);var r=t(35);t.o(r,"getQueryParam")&&t.d(n,"getQueryParam",function(){return r.getQueryParam}),t.o(r,"redirect")&&t.d(n,"redirect",function(){return r.redirect})},function(e,n,t){"use strict";var r=t(12),o=t(43),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,n){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var c,s={adapter:("undefined"!=typeof XMLHttpRequest?c=t(30):"undefined"!=typeof process&&(c=t(30)),c),transformRequest:[function(e,n){return o(n,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(n,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){s.headers[e]={}}),r.forEach(["post","put","patch"],function(e){s.headers[e]=r.merge(i)}),e.exports=s},function(i,e,a){var c;!function(){"use strict";var e="object"==typeof window?window:{};!e.HI_BASE32_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(e=window);var n=!e.HI_BASE32_NO_COMMON_JS&&"object"==typeof i&&i.exports,t=a(39),p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),m={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},h=[0,0,0,0,0,0,0,0],w=function(e,n){10<n.length&&(n="..."+n.substr(-10));var t=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+e+" bytes: "+n+" <-");throw t.position=e,t},g=function(e){if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var n,t,r,o,i,a,c,s,u=[],d=0,f=(e=e.replace(/=/g,"")).length,l=0,p=f>>3<<3;l<p;)n=m[e.charAt(l++)],t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],a=m[e.charAt(l++)],c=m[e.charAt(l++)],s=m[e.charAt(l++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4),u[d++]=255&(o<<4|i>>>1),u[d++]=255&(i<<7|a<<2|c>>>3),u[d++]=255&(c<<5|s);var h=f-p;return 2===h?(n=m[e.charAt(l++)],t=m[e.charAt(l++)],u[d++]=255&(n<<3|t>>>2)):4===h?(n=m[e.charAt(l++)],t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4)):5===h?(n=m[e.charAt(l++)],t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4),u[d++]=255&(o<<4|i>>>1)):7===h&&(n=m[e.charAt(l++)],t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],a=m[e.charAt(l++)],c=m[e.charAt(l++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4),u[d++]=255&(o<<4|i>>>1),u[d++]=255&(i<<7|a<<2|c>>>3)),u},r=function(e,n){if(!n)return function(e){for(var n,t,r="",o=e.length,i=0,a=0;i<o;)if((n=e[i++])<=127)r+=String.fromCharCode(n);else{191<n&&n<=223?(t=31&n,a=1):n<=239?(t=15&n,a=2):n<=247?(t=7&n,a=3):w(i,r);for(var c=0;c<a;++c)((n=e[i++])<128||191<n)&&w(i,r),t<<=6,t+=63&n;55296<=t&&t<=57343&&w(i,r),1114111<t&&w(i,r),t<=65535?r+=String.fromCharCode(t):(t-=65536,r+=String.fromCharCode(55296+(t>>10)),r+=String.fromCharCode(56320+(1023&t)))}return r}(g(e));if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var t,r,o,i,a,c,s,u,d="",f=e.indexOf("=");-1===f&&(f=e.length);for(var l=0,p=f>>3<<3;l<p;)t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],a=m[e.charAt(l++)],c=m[e.charAt(l++)],s=m[e.charAt(l++)],u=m[e.charAt(l++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))+String.fromCharCode(255&(a<<7|c<<2|s>>>3))+String.fromCharCode(255&(s<<5|u));var h=f-p;return 2===h?(t=m[e.charAt(l++)],r=m[e.charAt(l++)],d+=String.fromCharCode(255&(t<<3|r>>>2))):4===h?(t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))):5===h?(t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],a=m[e.charAt(l++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))):7===h&&(t=m[e.charAt(l++)],r=m[e.charAt(l++)],o=m[e.charAt(l++)],i=m[e.charAt(l++)],a=m[e.charAt(l++)],c=m[e.charAt(l++)],s=m[e.charAt(l++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))+String.fromCharCode(255&(a<<7|c<<2|s>>>3))),d},o={encode:function(e,n){var t="string"!=typeof e;return t&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),t?function(e){for(var n,t,r,o,i,a="",c=e.length,s=0,u=5*parseInt(c/5);s<u;)n=e[s++],t=e[s++],r=e[s++],o=e[s++],i=e[s++],a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[31&(r<<1|o>>>7)]+p[o>>>2&31]+p[31&(o<<3|i>>>5)]+p[31&i];var d=c-u;return 1===d?(n=e[s],a+=p[n>>>3]+p[n<<2&31]+"======"):2===d?(n=e[s++],t=e[s],a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[t<<4&31]+"===="):3===d?(n=e[s++],t=e[s++],r=e[s],a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[r<<1&31]+"==="):4===d&&(n=e[s++],t=e[s++],r=e[s++],o=e[s],a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[31&(r<<1|o>>>7)]+p[o>>>2&31]+p[o<<3&31]+"="),a}(e):n?function(e){for(var n,t,r,o,i,a="",c=e.length,s=0,u=5*parseInt(c/5);s<u;)n=e.charCodeAt(s++),t=e.charCodeAt(s++),r=e.charCodeAt(s++),o=e.charCodeAt(s++),i=e.charCodeAt(s++),a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[31&(r<<1|o>>>7)]+p[o>>>2&31]+p[31&(o<<3|i>>>5)]+p[31&i];var d=c-u;return 1===d?(n=e.charCodeAt(s),a+=p[n>>>3]+p[n<<2&31]+"======"):2===d?(n=e.charCodeAt(s++),t=e.charCodeAt(s),a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[t<<4&31]+"===="):3===d?(n=e.charCodeAt(s++),t=e.charCodeAt(s++),r=e.charCodeAt(s),a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[r<<1&31]+"==="):4===d&&(n=e.charCodeAt(s++),t=e.charCodeAt(s++),r=e.charCodeAt(s++),o=e.charCodeAt(s),a+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[31&(r<<1|o>>>7)]+p[o>>>2&31]+p[o<<3&31]+"="),a}(e):function(e){var n,t,r,o,i,a,c,s=!1,u="",d=0,f=0,l=e.length;do{for(h[0]=h[5],h[1]=h[6],h[2]=h[7],c=f;d<l&&c<5;++d)a=e.charCodeAt(d),h[c++]=a<128?a:(h[c++]=a<2048?192|a>>6:(h[c++]=a<55296||57344<=a?224|a>>12:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++d)),h[c++]=240|a>>18,128|a>>12&63),128|a>>6&63),128|63&a);f=c-5,d===l&&++d,l<d&&c<6&&(s=!0),n=h[0],4<c?(t=h[1],r=h[2],o=h[3],i=h[4],u+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[31&(r<<1|o>>>7)]+p[o>>>2&31]+p[31&(o<<3|i>>>5)]+p[31&i]):1===c?u+=p[n>>>3]+p[n<<2&31]+"======":2===c?(t=h[1],u+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[t<<4&31]+"===="):3===c?(t=h[1],r=h[2],u+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[r<<1&31]+"==="):(t=h[1],r=h[2],o=h[3],u+=p[n>>>3]+p[31&(n<<2|t>>>6)]+p[t>>>1&31]+p[31&(t<<4|r>>>4)]+p[31&(r<<1|o>>>7)]+p[o>>>2&31]+p[o<<3&31]+"=")}while(!s);return u}(e)},decode:r};r.asBytes=g,n?i.exports=o:(e.base32=o,t&&(void 0===(c=function(){return o}.call(o,a,o,i))||(i.exports=c)))}()},function(e,n,t){e.exports=t(40)},function(e,n){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return script});var script={global:function(){return window.document},register:function register(component,document){function render(element){if(element&&element.tagName&&"script"===element.tagName.toLowerCase()&&element.attributes.type&&"application/x-component"===element.attributes.type.value&&element.parentNode){var tag=element.getAttribute("data-component");if(tag&&tag===component.tag){component.log("instantiate_script_component");var props=element.innerText?eval("("+element.innerText+")"):{},container=document.createElement("div");if(!element.parentNode)throw new Error("Element has no parent");element.parentNode.replaceChild(container,element),component.render(props,container)}}}function scan(){for(var e=Array.prototype.slice.call(document.getElementsByTagName("script")),n=0;n<e.length;n++)render(e[n])}scan(),document.addEventListener("DOMContentLoaded",scan),window.addEventListener("load",scan),document.addEventListener("DOMNodeInserted",function(e){render(e.target)})}}},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var a=t(13),c=t(0),r={global:function(){if(window.React&&window.ReactDOM)return{React:window.React,ReactDOM:window.ReactDOM}},register:function(r,e){var o=e.React,i=e.ReactDOM;return o.createClass?r.react=o.createClass({displayName:"react",render:function(){return o.createElement("div",null)},componentDidMount:function(){r.log("instantiate_react_component");var e=i.findDOMNode(this),n=r.init(Object(c.t)({},this.props),null,e);this.setState({parent:n}),n.render(e)},componentDidUpdate:function(){this.state&&this.state.parent&&this.state.parent.updateProps(Object(c.t)({},this.props))},componentWillUnmount:function(){this.state&&this.state.parent&&this.state.parent.destroy()}}):r.react=function(e){function n(){return e.apply(this,arguments)||this}Object(a.a)(n,e);var t=n.prototype;return t.render=function(){return o.createElement("div",null)},t.componentDidMount=function(){r.log("instantiate_react_component");var e=i.findDOMNode(this),n=r.init(Object(c.t)({},this.props),null,e);this.setState({parent:n}),n.render(e)},t.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Object(c.t)({},this.props))},t.componentWillUnmount=function(){this.state&&this.state.parent&&this.state.parent.destroy()},n}(o.Component),r.react}}},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(0),o={global:function(){},register:function(n){return{render:function(e){return e("div")},inheritAttrs:!1,mounted:function(){var e=this.$el;this.parent=n.init(Object(r.t)({},this.$attrs),null,e),this.parent.render(e)},beforeUpdate:function(){this.parent&&this.$attrs&&this.parent.updateProps(Object(r.t)({},this.$attrs))}}}}},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var a=t(0),r={global:function(){return window.angular},register:function(r,e){return e.module(r.tag,[]).directive(Object(a.i)(r.tag),function(){for(var i={},e=0,n=r.getPropNames();e<n.length;e++){var t=n[e];i[t]="="}return r.looseProps&&(i.props="="),{scope:i,restrict:"E",controller:["$scope","$element",function(o,e){if(r.looseProps&&!o.props)throw new Error("For angular bindings to work, prop definitions must be passed to zoid.create");r.log("instantiate_angular_component");var n=function(){var e;if(o.props)e=o.props;else{e={};for(var n=0,t=Object.keys(i);n<t.length;n++){var r=t[n];void 0!==o[r]&&(e[r]=o[r])}}return Object(a.Q)(e,{function:function(n){return function(){var e=n.apply(this,arguments);return function(){if("$apply"!==o.$root.$$phase&&"$digest"!==o.$root.$$phase)try{o.$apply()}catch(e){}}(),e}}})},t=r.init(n(),null,e[0]);t.render(e[0]),o.$watch(function(){t.updateProps(n())})}]}})}}},function(e,n){},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var r=t(7),o=t(13),i={global:function(){},register:function(t,e){return function(e){function n(){return e.apply(this,arguments)||this}return Object(o.a)(n,e),n.prototype.didInsertElement=function(){t.render(Object(r.a)({},this.args),this.element)},n}(e)}}},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var s=t(7),u=t(0),r={global:function(){},register:function(t,e){var n=e.Component,r=e.NgModule,o=e.ElementRef,i=e.NgZone;t.log("initializing angular2 component");var a=function(r){return Object(u.Q)(Object(s.a)({},r.internalProps,r.props),{function:function(t){if("function"==typeof t)return function(){var e=this,n=arguments;return r.zone.run(function(){return t.apply(e,n)})}}})},c=n({selector:t.tag,template:"<div></div>",inputs:["props"]}).Class({constructor:[o,i,function(e,n){this.elementRef=e,this.zone=n}],ngOnInit:function(){var e=this.elementRef.nativeElement,n=t.init(a(this),null,e);n.render(e),this.parent=n},ngOnChanges:function(){this.parent&&this.parent.updateProps(a(this))}});return r({declarations:[c],exports:[c]}).Class({constructor:function(){}})}}},function(e,n,t){"use strict";e.exports=function(t,r){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];return t.apply(r,e)}}},function(e,n,l){"use strict";var p=l(12),h=l(44),m=l(46),w=l(47),g=l(48),v=l(31),E="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||l(49);e.exports=function(f){return new Promise(function(t,r){var o=f.data,i=f.headers;p.isFormData(o)&&delete i["Content-Type"];var a=new XMLHttpRequest,e="onreadystatechange",c=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in a||g(f.url)||(a=new window.XDomainRequest,e="onload",c=!0,a.onprogress=function(){},a.ontimeout=function(){}),f.auth){var n=f.auth.username||"",s=f.auth.password||"";i.Authorization="Basic "+E(n+":"+s)}if(a.open(f.method.toUpperCase(),m(f.url,f.params,f.paramsSerializer),!0),a.timeout=f.timeout,a[e]=function(){if(a&&(4===a.readyState||c)&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?w(a.getAllResponseHeaders()):null,n={data:f.responseType&&"text"!==f.responseType?a.response:a.responseText,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:e,config:f,request:a};h(t,r,n),a=null}},a.onerror=function(){r(v("Network Error",f,null,a)),a=null},a.ontimeout=function(){r(v("timeout of "+f.timeout+"ms exceeded",f,"ECONNABORTED",a)),a=null},p.isStandardBrowserEnv()){var u=l(50),d=(f.withCredentials||g(f.url))&&f.xsrfCookieName?u.read(f.xsrfCookieName):void 0;d&&(i[f.xsrfHeaderName]=d)}if("setRequestHeader"in a&&p.forEach(i,function(e,n){void 0===o&&"content-type"===n.toLowerCase()?delete i[n]:a.setRequestHeader(n,e)}),f.withCredentials&&(a.withCredentials=!0),f.responseType)try{a.responseType=f.responseType}catch(e){if("json"!==f.responseType)throw e}"function"==typeof f.onDownloadProgress&&a.addEventListener("progress",f.onDownloadProgress),"function"==typeof f.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(e){a&&(a.abort(),r(e),a=null)}),void 0===o&&(o=null),a.send(o)})}},function(e,n,t){"use strict";var a=t(45);e.exports=function(e,n,t,r,o){var i=new Error(e);return a(i,n,t,r,o)}},function(e,n,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,n,t){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,n,t){"use strict";t(10)},function(e,n){n.getQueryParam=function(e){return function(e){var n={};if(!e)return n;if(-1===e.indexOf("="))return n;for(var t=0,r=e.split("&");t<r.length;t++){var o=r[t];(o=o.split("="))[0]&&o[1]&&(n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return n}(window.location.search.slice(1))[e]},n.redirect=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=arguments[1];return new window.safepay.Promise(function(e){setTimeout(function(){n.location=t,e()},1)})},n.memoize=function(t){var r,o=this,i=arguments,a=!1,e=function(){for(var e=Array(0),n=0;n<0;n++)e[n]=i[n];return a?r:(a=!0,r=t.apply(o,i))};return e.reset=function(){a=!1},e},n.noop=function(){}},function(e,n,t){"use strict";function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.d(n,"l",function(){return c}),t.d(n,"k",function(){return s}),t.d(n,"b",function(){return d}),t.d(n,"f",function(){return f}),t.d(n,"o",function(){return l}),t.d(n,"t",function(){return p}),t.d(n,"i",function(){return m}),t.d(n,"m",function(){return g}),t.d(n,"c",function(){return v}),t.d(n,"v",function(){return E}),t.d(n,"x",function(){return _}),t.d(n,"y",function(){return T}),t.d(n,"n",function(){return S}),t.d(n,"h",function(){return A}),t.d(n,"a",function(){return C}),t.d(n,"r",function(){return P}),t.d(n,"d",function(){return L}),t.d(n,"p",function(){return j}),t.d(n,"s",function(){return x}),t.d(n,"q",function(){return I}),t.d(n,"e",function(){return N}),t.d(n,"j",function(){return R}),t.d(n,"u",function(){return k}),t.d(n,"z",function(){return W}),t.d(n,"B",function(){return M}),t.d(n,"g",function(){return U}),t.d(n,"A",function(){return B}),t.d(n,"w",function(){return G});var i={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},o="Call was rejected by callee.\r\n";function a(e){return void 0===e&&(e=window),e.location.protocol===i.ABOUT_PROTOCOL}function c(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function s(e){if(e&&!c(e))try{return e.opener}catch(e){}}function u(e){try{return e&&e.location&&e.location.href,!0}catch(e){}return!1}function d(e){var n=(e=e||window).location;if(!n)throw new Error("Can not read window location");var t=n.protocol;if(!t)throw new Error("Can not read window protocol");if(t===i.FILE_PROTOCOL)return i.FILE_PROTOCOL+"//";if(t===i.ABOUT_PROTOCOL){var r=c(e);return r&&u(r)?d(r):i.ABOUT_PROTOCOL+"//"}var o=n.host;if(!o)throw new Error("Can not read window host");return t+"//"+o}function f(e){var n=d(e=e||window);return n&&e.mockDomain&&0===e.mockDomain.indexOf(i.MOCK_PROTOCOL)?e.mockDomain:n}function l(e){try{if(e===window)return!0}catch(e){}try{var n=Object.getOwnPropertyDescriptor(e,"location");if(n&&!1===n.enumerable)return!1}catch(e){}try{if(a(e)&&u(e))return!0}catch(e){}try{if(d(e)===d(window))return!0}catch(e){}return!1}function p(e){if(!l(e))return!1;try{if(e===window)return!0;if(a(e)&&u(e))return!0;if(f(window)===f(e))return!0}catch(e){}return!1}function h(e,n){if(!e||!n)return!1;var t=c(n);return t?t===e:-1!==function(e){var n=[];try{for(;e.parent!==e;)n.push(e.parent),e=e.parent}catch(e){}return n}(n).indexOf(e)}function m(n){var t,e,r=[];try{t=n.frames}catch(e){t=n}try{e=t.length}catch(e){}if(0===e)return r;if(e){for(var o=0;o<e;o++){var i=void 0;try{i=t[o]}catch(e){continue}r.push(i)}return r}for(var a=0;a<100;a++){var c=void 0;try{c=t[a]}catch(e){return r}if(!c)return r;r.push(c)}return r}function w(e){for(var n=[],t=0,r=m(e);t<r.length;t++){var o=r[t];n.push(o);for(var i=0,a=w(o);i<a.length;i++){var c=a[i];n.push(c)}}return n}function g(e){if(e){try{if(e.top)return e.top}catch(e){}if(c(e)===e)return e;try{if(h(window,e)&&window.top)return window.top}catch(e){}try{if(h(e,window)&&window.top)return window.top}catch(e){}for(var n=0,t=w(e);n<t.length;n++){var r=t[n];try{if(r.top)return r.top}catch(e){}if(c(r)===r)return r}}}function v(e){var n=g(e);if(!n)throw new Error("Can not determine top window");return w(n).concat([n])}function E(e){return e===g(e)}function y(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var n=e.ownerDocument;return!(!n||!n.documentElement||n.documentElement.contains(e))}var b=[],O=[];function _(e,n){void 0===n&&(n=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==o}if(n&&p(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var t=function(e,n){for(var t=0;t<e.length;t++)try{if(e[t]===n)return t}catch(e){}return-1}(b,e);if(-1!==t){var r=O[t];if(r&&y(r))return!0}return!1}function T(e){if(function(){for(var e=0;e<O.length;e++)y(O[e])&&(O.splice(e,1),b.splice(e,1));for(var n=0;n<b.length;n++)_(b[n])&&(O.splice(n,1),b.splice(n,1))}(),e&&e.contentWindow)try{b.push(e.contentWindow),O.push(e)}catch(e){}}function S(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function A(e,n){for(var t=m(e),r=0;r<t.length;r++){var o=t[r];try{if(p(o)&&o.name===n&&-1!==t.indexOf(o))return o}catch(e){}}try{if(-1!==t.indexOf(e.frames[n]))return e.frames[n]}catch(e){}try{if(-1!==t.indexOf(e[n]))return e[n]}catch(e){}}function C(e,n){var t;return(t=A(e,n))?t:function e(n,t){var r=A(n,t);if(r)return r;for(var o=0,i=m(n);o<i.length;o++){var a=e(i[o],t);if(a)return a}}(g(e)||e,n)}function P(e,n){return e===s(n)}function L(e){return s(e=e||window)||c(e)||void 0}function j(e,n){var t=L(n);if(t)return t===e;if(n===e)return!1;if(g(n)===n)return!1;for(var r=0,o=m(e);r<o.length;r++)if(o[r]===n)return!0;return!1}function x(){return Boolean(s(window))}function I(){return Boolean(c(window))}function D(e,n){for(var t=0;t<e.length;t++)for(var r=e[t],o=0;o<n.length;o++)if(r===n[o])return!0;return!1}function N(e){void 0===e&&(e=window);for(var n=0,t=e;t;)(t=c(t))&&(n+=1);return n}function R(e,n){return void 0===n&&(n=1),function(e,n){void 0===n&&(n=1);for(var t=e,r=0;r<n;r++){if(!t)return;t=c(t)}return t}(e,N(e)-n)}function k(e,n){var t=g(e)||e,r=g(n)||n;try{if(t&&r)return t===r}catch(e){}var o=v(e),i=v(n);if(D(o,i))return!0;var a=s(t),c=s(r);return a&&D(v(a),i)||c&&D(v(c),o),!1}function W(e,n){if("string"==typeof e){if("string"==typeof n)return e===i.WILDCARD||n===e;if(r(n))return!1;if(Array.isArray(n))return!1}return r(e)?r(n)?e.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(e)):!!Array.isArray(e)&&(Array.isArray(n)?JSON.stringify(e)===JSON.stringify(n):!r(n)&&e.some(function(e){return W(e,n)}))}function M(e){return Array.isArray(e)?"("+e.join(" | ")+")":r(e)?"RegExp("+e.toString():e.toString()}function U(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):f()}function B(n,t,r,o){var i;return void 0===r&&(r=1e3),void 0===o&&(o=1/0),function e(){if(_(n))return i&&clearTimeout(i),t();o<=0?clearTimeout(i):(o-=r,i=setTimeout(e,r))}(),{cancel:function(){i&&clearTimeout(i)}}}function G(e){try{if(e===window)return!0}catch(e){if(e&&e.message===o)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===o)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===o)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===o)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===o)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===o)return!0}try{e&&e.__cross_domain_utils_window_check__}catch(e){return!0}return!1}},function(e,n,t){"use strict";t.r(n);var r=t(3),o=t(5);function i(e,n){if(!o.a.ALLOW_POSTMESSAGE_POPUP&&!1===Object(r.isSameTopWindow)(e,n))throw new Error("Can not send and receive post messages between two different windows (disabled to emulate IE)")}t.d(n,"emulateIERestrictions",function(){return i})},function(e,n,t){"use strict";t.r(n);var r=t(11);t.d(n,"openBridge",function(){return r.openBridge}),t.d(n,"linkUrl",function(){return r.linkUrl}),t.d(n,"isBridge",function(){return r.isBridge}),t.d(n,"needsBridge",function(){return r.needsBridge}),t.d(n,"needsBridgeForBrowser",function(){return r.needsBridgeForBrowser}),t.d(n,"hasBridge",function(){return r.hasBridge}),t.d(n,"needsBridgeForWin",function(){return r.needsBridgeForWin}),t.d(n,"needsBridgeForDomain",function(){return r.needsBridgeForDomain}),t.d(n,"openTunnelToOpener",function(){return r.openTunnelToOpener}),t.d(n,"destroyBridges",function(){return r.destroyBridges})},function(n,e){(function(e){n.exports=e}).call(this,{})},function(e,n,t){"use strict";var r=t(12),o=t(29),i=t(42),a=t(18);function c(e){var n=new i(e),t=o(i.prototype.request,n);return r.extend(t,i.prototype,n),r.extend(t,n),t}var s=c(a);s.Axios=i,s.create=function(e){return c(r.merge(a,e))},s.Cancel=t(33),s.CancelToken=t(56),s.isCancel=t(32),s.all=function(e){return Promise.all(e)},s.spread=t(57),e.exports=s,e.exports.default=s},function(e,n){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||"function"==typeof(n=e).readFloatLE&&"function"==typeof n.slice&&t(n.slice(0,0))||!!e._isBuffer);var n}},function(e,n,t){"use strict";var r=t(18),o=t(12),i=t(51),a=t(52);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var n=[a,void 0],t=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)t=t.then(n.shift(),n.shift());return t},o.forEach(["delete","get","head","options"],function(t){c.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(r){c.prototype[r]=function(e,n,t){return this.request(o.merge(t||{},{method:r,url:e,data:n}))}}),e.exports=c},function(e,n,t){"use strict";var o=t(12);e.exports=function(t,r){o.forEach(t,function(e,n){n!==r&&n.toUpperCase()===r.toUpperCase()&&(t[r]=e,delete t[n])})}},function(e,n,t){"use strict";var o=t(31);e.exports=function(e,n,t){var r=t.config.validateStatus;t.status&&r&&!r(t.status)?n(o("Request failed with status code "+t.status,t.config,null,t.request,t)):e(t)}},function(e,n,t){"use strict";e.exports=function(e,n,t,r,o){return e.config=n,t&&(e.code=t),e.request=r,e.response=o,e}},function(e,n,t){"use strict";var i=t(12);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,n,t){if(!n)return e;var r;if(t)r=t(n);else if(i.isURLSearchParams(n))r=n.toString();else{var o=[];i.forEach(n,function(e,n){null!=e&&(i.isArray(e)?n+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(a(n)+"="+a(e))}))}),r=o.join("&")}return r&&(e+=(-1===e.indexOf("?")?"?":"&")+r),e}},function(e,n,t){"use strict";var i=t(12),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var n,t,r,o={};return e&&i.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),n=i.trim(e.substr(0,r)).toLowerCase(),t=i.trim(e.substr(r+1)),n){if(o[n]&&0<=a.indexOf(n))return;o[n]="set-cookie"===n?(o[n]?o[n]:[]).concat([t]):o[n]?o[n]+", "+t:t}}),o}},function(e,n,t){"use strict";var a=t(12);e.exports=a.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function i(e){var n=e;return r&&(o.setAttribute("href",n),n=o.href),o.setAttribute("href",n),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return t=i(window.location.href),function(e){var n=a.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(e,n,t){"use strict";function c(){this.message="String contains an invalid character"}(c.prototype=new Error).code=5,c.prototype.name="InvalidCharacterError",e.exports=function(e){for(var n,t,r=String(e),o="",i=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.charAt(0|i)||(a="=",i%1);o+=a.charAt(63&n>>8-i%1*8)){if(255<(t=r.charCodeAt(i+=.75)))throw new c;n=n<<8|t}return o}},function(e,n,t){"use strict";var c=t(12);e.exports=c.isStandardBrowserEnv()?{write:function(e,n,t,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(n)),c.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),c.isString(r)&&a.push("path="+r),c.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,n,t){"use strict";var r=t(12);function o(){this.handlers=[]}o.prototype.use=function(e,n){return this.handlers.push({fulfilled:e,rejected:n}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(n){r.forEach(this.handlers,function(e){null!==e&&n(e)})},e.exports=o},function(e,n,t){"use strict";var r=t(12),o=t(53),i=t(32),a=t(18),c=t(54),s=t(55);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(n){return u(n),n.baseURL&&!c(n.url)&&(n.url=s(n.baseURL,n.url)),n.headers=n.headers||{},n.data=o(n.data,n.headers,n.transformRequest),n.headers=r.merge(n.headers.common||{},n.headers[n.method]||{},n.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete n.headers[e]}),(n.adapter||a.adapter)(n).then(function(e){return u(n),e.data=o(e.data,e.headers,n.transformResponse),e},function(e){return i(e)||(u(n),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,n.transformResponse))),Promise.reject(e)})}},function(e,n,t){"use strict";var r=t(12);e.exports=function(n,t,e){return r.forEach(e,function(e){n=e(n,t)}),n}},function(e,n,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,n,t){"use strict";e.exports=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}},function(e,n,t){"use strict";var r=t(33);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var t=this;e(function(e){t.reason||(t.reason=new r(e),n(t.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var n;return{token:new o(function(e){n=e}),cancel:n}},e.exports=o},function(e,n,t){"use strict";e.exports=function(n){return function(e){return n.apply(null,e)}}},function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"create",function(){return q}),t.d(r,"getByTag",function(){return X}),t.d(r,"getCurrentScriptDir",function(){return v.w}),t.d(r,"destroyAll",function(){return Y}),t.d(r,"postRobot",function(){return J}),t.d(r,"CONSTANTS",function(){return K}),t.d(r,"PopupOpenError",function(){return _.b}),t.d(r,"IntegrationError",function(){return _.a}),t.d(r,"RenderError",function(){return _.c});var C=t(1),w=t(7),g=t(8),a=t(13);function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(t,r,e,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,n){return n(t,r,e)||e},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,r,i),i=null),i}var p=t(3),v=t(0),i=function(){function e(){var t,o,r;this.clean=void 0,this.event=void 0,this.component=void 0,this.clean=(t=this,r=!(o=[]),{set:function(e,n){return r||(t[e]=n,this.register(function(){delete t[e]})),n},register:function(e,n){if("function"==typeof e&&(n=e,e="<anonymous-cleanup-handler>"),"function"!=typeof n)throw new TypeError("Expected to be passed function to clean.register");r?n():o.push({complete:!1,name:e,run:function(){this.complete||(this.complete=!0,n&&n())}})},hasTasks:function(){return Boolean(o.filter(function(e){return!e.complete}).length)},all:function(){var e=[];for(r=!0;o.length;)e.push(o.pop().run());return C.a.all(e).then(function(){})},run:function(e){for(var n=[],t=0;t<o.length;t++){var r=o[t];r.name===e&&n.push(r.run())}return C.a.all(n).then(v.I)}}),this.event=Object(v.s)()}var n=e.prototype;return n.addProp=function(e,n,t){Object(v.g)(e,this,n,t)},n.on=function(e,n){return this.event.on(e,n)},n.listeners=function(){throw new Error("Expected listeners to be implemented")},n.error=function(e){throw new Error("Expected error to be implemented - got "+Object(v.X)(e))},n.listen=function(c,s){var u=this;if(!c)throw this.component.createError("window to listen to not set");if(!s)throw new Error("Must pass domain to listen to");if(this.listeners)for(var d=this.listeners(),e=function(e,n){var r=n[e],o=r.replace(/^zoid_/,""),t=function(e){u.error(e)},i=Object(g.on)(r,{window:c,domain:s,errorHandler:t},function(e){var n=e.source,t=e.data;return u.component.log("listener_"+o),d[r].call(u,n,t)}),a=Object(g.on)(r,{window:c,errorHandler:t},function(e){var n=e.origin;u.component.logError("unexpected_listener_"+o,{origin:n,domain:s.toString()}),u.error(new Error("Unexpected "+o+" message from domain "+n+" -- expected message from "+s.toString()))});u.clean.register(function(){i.cancel(),a.cancel()})},n=0,t=Object.keys(d);n<t.length;n++)e(n,t)},e}(),c=t(14),s=t(19),d=t.n(s),E=t(2);function f(e){return e.replace(/^[^a-z0-9A-Z]+|[^a-z0-9A-Z]+$/g,"").replace(/[^a-z0-9A-Z]+/g,"_")}var u=Object(v.G)(function(){return!!window.name&&"xcomponent"===window.name.split("__")[0]}),h=Object(v.G)(function(){if(!window.name)throw new Error("Can not get component meta without window name");var e,n,t=window.name.split("__"),r=t[0],o=t[1],i=t[2],a=t[3];if("xcomponent"!==r)throw new Error("Window not rendered by zoid - got "+r);try{e=JSON.parse((n=a,d.a.decode(n.toUpperCase())))}catch(e){throw new Error("Can not decode component-meta: "+a+" "+Object(v.X)(e))}return e.name=o,e.version=i.replace(/_/g,"."),e});function m(){return h().domain}function y(e){var n,t=e.ref,r=e.uid,o=e.distance;if(t===E.WINDOW_REFERENCES.OPENER?n=Object(p.getOpener)(window):t===E.WINDOW_REFERENCES.TOP?n=Object(p.getTop)(window):t===E.WINDOW_REFERENCES.PARENT&&(n=o?Object(p.getNthParentFromTop)(window,o):Object(p.getParent)(window)),t===E.WINDOW_REFERENCES.GLOBAL){var i=Object(p.getAncestor)(window);if(i)for(var a=0,c=Object(p.getAllFramesInWindow)(i);a<c.length;a++){var s=c[a],u=Object(v.z)(s);if(u&&u.windows&&u.windows[r]){n=u.windows[r];break}}}if(!n)throw new Error("Unable to find window by ref");return n}var b=Object(v.G)(function(){var e=h();if(!e)throw new Error("Can not get parent component window - window not rendered by zoid");return y(e.componentParent)}),O=Object(v.G)(function(){var e=h();if(!e)throw new Error("Can not get parent component window - window not rendered by zoid");return y(e.renderParent)}),_=t(15);function T(e,n,t,r){var o=e.getProp(t);return o?"function"==typeof o.childDecorate?o.childDecorate(r):r:e.looseProps?r:void 0}var S=function(o){function e(e){var a;if((a=o.call(this)||this).component=void 0,a.props=void 0,a.context=void 0,a.onPropHandlers=void 0,a.onInit=void 0,a.watchingForResize=void 0,a.autoResize=void 0,a.component=e,!a.hasValidParentDomain())return a.error(new _.c("Can not be rendered by domain: "+a.getParentDomain())),l(a);a.component.log("construct_child"),a.onPropHandlers=[];for(var n=function(e,n){for(var i=n[e],t=function(e,n){var t=n[e],r=t[0],o=t[1];Object.defineProperty(i,r,{configurable:!0,get:function(){return a.props||a.setProps(a.getInitialProps(),m()),delete i[r],i[r]=o(),i[r]}})},r=0,o=[["xchild",function(){return l(l(a))}],["xprops",function(){return a.props}]];r<o.length;r++)t(r,o)},t=0,r=[a.component,window];t<r.length;t++)n(t,r);return a.component.log("init_child"),a.setWindows(),a.listenForResize(),a.onInit=a.sendToParent(E.POST_MESSAGE.INIT,{exports:a.exports()}).then(function(e){var n=e.origin,t=e.data;return a.context=t.context,a.setProps(t.props,n),a.watchForResize(),l(l(a))}).catch(function(e){throw a.error(e),e}),a}Object(a.a)(e,o);var n=e.prototype;return n.listenForResize=function(){var e=this;this.component.listenForResize&&(this.sendToParent(E.POST_MESSAGE.ONRESIZE,{},{fireAndForget:!0}),window.addEventListener("resize",function(){e.sendToParent(E.POST_MESSAGE.ONRESIZE,{},{fireAndForget:!0})}))},n.hasValidParentDomain=function(){return Object(p.matchDomain)(this.component.allowedParentDomains,this.getParentDomain())},n.init=function(){return this.onInit},n.getParentDomain=function(){return m()},n.onProps=function(e){this.onPropHandlers.push(e)},n.getParentComponentWindow=function(){return b()},n.getParentRenderWindow=function(){return O()},n.getInitialProps=function(){var o=this,e=h(),n=e.props;if(n.type===E.INITIAL_PROPS.RAW)n=n.value;else{if(n.type!==E.INITIAL_PROPS.UID)throw new Error("Unrecognized props type: "+n.type);var t=b();if(!Object(p.isSameDomain)(t)){if("file:"===window.location.protocol)throw new Error("Can not get props from file:// domain");throw new Error("Parent component window is on a different domain - expected "+Object(p.getDomain)()+" - can not retrieve props")}var r=Object(v.z)(t);if(!r)throw new Error("Can not find global for parent component - can not retrieve props");n=JSON.parse(r.props[e.uid])}if(!n)throw new Error("Initial props not found");return Object(v.k)(n,function(e){var n=e.fullKey,t=e.self,r=e.args;return o.onInit.then(function(){var e=Object(v.v)(o.props,n);if("function"!=typeof e)throw new TypeError("Expected "+n+" to be function, got "+typeof e);return e.apply(t,r)})})},n.setProps=function(e,n,t){void 0===t&&(t=!0),this.props=this.props||{};var r=function(e,n,t,r){void 0===r&&(r=!0);for(var o={},i=0,a=Object.keys(n);i<a.length;i++){var c=a[i],s=e.getProp(c),u=n[c];s&&s.sameDomain&&t!==Object(p.getDomain)(window)||(o[c]=T(e,0,c,u),s&&s.alias&&!o[s.alias]&&(o[s.alias]=u))}if(r)for(var d=0,f=e.getPropNames();d<f.length;d++){var l=f[d];n.hasOwnProperty(l)||(o[l]=T(e,0,l,n[l]))}return o}(this.component,e,n,t);Object(v.t)(this.props,r),this.props.logLevel&&Object(v.S)(this.props.logLevel);for(var o=0,i=this.onPropHandlers;o<i.length;o++)i[o].call(this,this.props)},n.sendToParent=function(e,n,t){void 0===n&&(n={}),void 0===t&&(t={});var r=b();if(!r)throw new Error("Can not find parent component window to message");return this.component.log("send_to_parent_"+e),Object(g.send)(r,e,n,Object(w.a)({domain:m()},t))},n.setWindows=function(){if(window.__activeZoidComponent__)throw this.component.createError("Can not attach multiple components to the same window");if(window.__activeZoidComponent__=this,!b())throw this.component.createError("Can not find parent window");var e=h();if(e.tag!==this.component.tag)throw this.component.createError("Parent is "+e.tag+" - can not attach "+this.component.tag);this.watchForClose()},n.watchForClose=function(){var e=this;window.addEventListener("unload",function(){return e.checkClose()})},n.enableAutoResize=function(e){var n=void 0===e?{}:e,t=n.width,r=void 0===t||t,o=n.height,i=void 0===o||o;this.autoResize={width:r,height:i},this.watchForResize()},n.getAutoResize=function(){var e=!1,n=!1,t=this.autoResize||this.component.autoResize;return"object"==typeof t?(e=Boolean(t.width),n=Boolean(t.height)):t&&(n=e=!0),{width:e,height:n,element:t.element?Object(v.x)(t.element):window.navigator.userAgent.match(/MSIE (9|10)\./)?document.body:document.documentElement}},n.watchForResize=function(){var e=this,n=this.getAutoResize(),t=n.width,r=n.height,o=n.element;if((t||r)&&this.context!==E.CONTEXT_TYPES.POPUP&&!this.watchingForResize)return this.watchingForResize=!0,C.a.try(function(){return v.n}).then(function(){if(!Object(v.m)(o,{width:t,height:r}))return e.resizeToElement(o,{width:t,height:r})}).then(function(){return Object(v.h)(function(){return Object(v.K)(o,{width:t,height:r}).then(function(){return e.resizeToElement(o,{width:t,height:r})})})})},n.exports=function(){var t=this;return{updateProps:function(e){var n=this;return C.a.try(function(){return t.setProps(e,n.origin,!1)})},close:function(){return C.a.try(function(){return t.destroy()})}}},n.resize=function(e,n){var t=this;return C.a.resolve().then(function(){if(t.component.log("resize",{width:Object(v.W)(e),height:Object(v.W)(n)}),t.context!==E.CONTEXT_TYPES.POPUP)return t.sendToParent(E.POST_MESSAGE.RESIZE,{width:e,height:n}).then(v.I)})},n.resizeToElement=function(c,e){var s=this,u=e.width,d=e.height,f=[];return function a(){return C.a.try(function(){for(var e=Object(v.Z)(c,{width:u,height:d}),n=e.check().dimensions,t=0;t<f.length;t++){var r=f[t],o=!u||r.width===n.width,i=!d||r.height===n.height;if(o&&i)return}return f.push({width:n.width,height:n.height}),s.resize(u?n.width:null,d?n.height:null).then(function(){if(e.check().changed)return a()})})}()},n.hide=function(){return this.sendToParent(E.POST_MESSAGE.HIDE).then(v.I)},n.show=function(){return this.sendToParent(E.POST_MESSAGE.SHOW).then(v.I)},n.userClose=function(){return this.close(E.CLOSE_REASONS.USER_CLOSED)},n.close=function(e){void 0===e&&(e=E.CLOSE_REASONS.CHILD_CALL),this.component.log("close_child"),this.sendToParent(E.POST_MESSAGE.CLOSE,{reason:e})},n.checkClose=function(){this.sendToParent(E.POST_MESSAGE.CHECK_CLOSE,{},{fireAndForget:!0})},n.destroy=function(){return Object(c.c)().then(function(){window.close()})},n.focus=function(){this.component.log("focus"),window.focus()},n.error=function(e){var n=Object(v.X)(e);return this.component.logError("error",{error:n}),this.sendToParent(E.POST_MESSAGE.ERROR,{error:n}).then(v.I)},e}(i);function A(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,n,t){return n&&A(e.prototype,n),t&&A(e,t),e}var L,j,x,I={};function D(e,n,t,r,o){if(void 0===o&&(o=!0),null!=t&&""!==t){if(!t||"function"!=typeof t.then||!e.promise){if("function"===e.type){if("function"!=typeof t)throw new TypeError("Prop is not of type function: "+n)}else if("string"===e.type){if("string"!=typeof t)throw new TypeError("Prop is not of type string: "+n)}else if("object"===e.type)try{JSON.stringify(t)}catch(e){throw new Error("Unable to serialize prop: "+n)}else if("number"===e.type&&isNaN(parseInt(t,10)))throw new TypeError("Prop is not a number: "+n);"function"==typeof e.validate&&t&&e.validate(t,r)}}else if(o&&!1!==e.required&&!e.hasOwnProperty("def"))throw new Error("Prop is required: "+n)}function N(e,n,t,r,o){var i,a,c=e.getProp(r);!(i=c.value?c.value:!c.def||t.hasOwnProperty(r)&&null!=(a=o)&&""!==a?o:c.def.call(e,t))&&c.alias&&t[c.alias]&&(i=t[c.alias]);var s=!1;c.decorate&&null!=i&&(i=c.decorate.call(n,i,t),s=!0);var u=c.type;if("boolean"===u)i=Boolean(i);else if("function"===u){if(!i&&c.noop&&(i=v.I,!s&&c.decorate&&(i=c.decorate.call(n,v.I,t))),i&&"function"==typeof i){i=i.bind(n),c.denodeify&&(i=Object(v.j)(i)),c.promisify&&(i=Object(v.O)(i));var d=i;i=function(){return e.log("call_prop_"+r),d.apply(this,arguments)},c.once&&(i=Object(v.L)(i)),c.memoize&&(i=Object(v.G)(i))}}else"string"===u||"object"===u||"number"===u&&void 0!==i&&(i=parseInt(i,10));return i}I[E.CONTEXT_TYPES.IFRAME]={focusable:!1,renderedIntoContainerTemplate:!0,allowResize:!0,openOnClick:!1,needsBridge:!1,open:function(e){var o=this,n=this.component.attributes.iframe||{};return this.iframe=Object(v.B)({url:e,attributes:Object(w.a)({name:this.childWindowName,title:this.component.name,scrolling:this.component.scrolling?"yes":"no"},n),class:[E.CLASS_NAMES.COMPONENT_FRAME,E.CLASS_NAMES.INVISIBLE]},this.element),Object(v.f)(this.iframe).then(function(e){o.window=e;var n=function(){return C.a.try(function(){return o.props.onClose(E.CLOSE_REASONS.CLOSE_DETECTED)}).finally(function(){return o.destroy()})},t=Object(v.cb)(o.iframe,n),r=Object(v.cb)(o.element,n);o.clean.register("destroyWindow",function(){t.cancel(),r.cancel(),Object(g.cleanUpWindow)(o.window),delete o.window,o.iframe&&(Object(v.l)(o.iframe),delete o.iframe)})})},openPrerender:function(){var n=this,e=this.component.attributes.iframe||{};return this.prerenderIframe=Object(v.B)({attributes:Object(w.a)({name:"__prerender__"+this.childWindowName,scrolling:this.component.scrolling?"yes":"no"},e),class:[E.CLASS_NAMES.PRERENDER_FRAME,E.CLASS_NAMES.VISIBLE]},this.element),Object(v.f)(this.prerenderIframe).then(function(e){n.prerenderWindow=e,n.clean.register("destroyPrerender",function(){n.prerenderIframe&&(Object(v.l)(n.prerenderIframe),delete n.prerenderIframe)})})},switchPrerender:function(){var e=this;Object(v.a)(this.prerenderIframe,E.CLASS_NAMES.INVISIBLE),Object(v.P)(this.prerenderIframe,E.CLASS_NAMES.VISIBLE),Object(v.a)(this.iframe,E.CLASS_NAMES.VISIBLE),Object(v.P)(this.iframe,E.CLASS_NAMES.INVISIBLE),setTimeout(function(){e.prerenderIframe&&Object(v.l)(e.prerenderIframe)},1e3)},delegateOverrides:{openContainer:E.DELEGATE.CALL_DELEGATE,destroyComponent:E.DELEGATE.CALL_DELEGATE,destroyContainer:E.DELEGATE.CALL_DELEGATE,cancelContainerEvents:E.DELEGATE.CALL_DELEGATE,createPrerenderTemplate:E.DELEGATE.CALL_DELEGATE,elementReady:E.DELEGATE.CALL_DELEGATE,showContainer:E.DELEGATE.CALL_DELEGATE,showComponent:E.DELEGATE.CALL_DELEGATE,hideContainer:E.DELEGATE.CALL_DELEGATE,hideComponent:E.DELEGATE.CALL_DELEGATE,hide:E.DELEGATE.CALL_DELEGATE,show:E.DELEGATE.CALL_DELEGATE,resize:E.DELEGATE.CALL_DELEGATE,loadUrl:E.DELEGATE.CALL_DELEGATE,hijackSubmit:E.DELEGATE.CALL_DELEGATE,openPrerender:E.DELEGATE.CALL_DELEGATE,switchPrerender:E.DELEGATE.CALL_DELEGATE,renderTemplate:E.DELEGATE.CALL_ORIGINAL,openContainerFrame:E.DELEGATE.CALL_ORIGINAL,getOutlet:E.DELEGATE.CALL_ORIGINAL,open:function(e,n){return function(){var e=this;return n.apply(this,arguments).then(function(){if(e.clean.set("window",Object(p.findFrameByName)(b(),e.childWindowName)),!e.window)throw new Error("Unable to find parent component iframe window")})}}},resize:function(e,n){e&&(this.container.style.width=Object(v.Y)(e),this.element.style.width=Object(v.Y)(e)),n&&(this.container.style.height=Object(v.Y)(n),this.element.style.height=Object(v.Y)(n))},show:function(){Object(v.V)(this.element)},hide:function(){Object(v.A)(this.element)},loadUrl:function(e){this.iframe.setAttribute("src",e)}},I[E.CONTEXT_TYPES.POPUP]={focusable:!0,renderedIntoContainerTemplate:!1,allowResize:!1,openOnClick:!0,needsBridge:!0,open:function(h){var m=this;return void 0===h&&(h=""),C.a.try(function(){var e,n,t,r,o,i=m.component.dimensions||{},a=i.width,c=void 0===a?E.DEFAULT_DIMENSIONS.WIDTH:a,s=i.height,u=void 0===s?E.DEFAULT_DIMENSIONS.HEIGHT:s,d=(n=(e={width:c=Object(v.J)(c,window.outerWidth),height:u=Object(v.J)(u,window.outerWidth)}).width,t=e.height,o=r=0,n&&(window.outerWidth?r=Math.round((window.outerWidth-n)/2)+window.screenX:window.screen.width&&(r=Math.round((window.screen.width-n)/2))),t&&(window.outerHeight?o=Math.round((window.outerHeight-t)/2)+window.screenY:window.screen.height&&(o=Math.round((window.screen.height-t)/2))),{x:r,y:o}),f=d.x,l=d.y,p=m.component.attributes.popup||{};m.window=Object(v.M)(h||"",Object(w.a)({name:m.childWindowName,width:c,height:u,top:l,left:f,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},p)),m.prerenderWindow=m.window,m.clean.register("destroyWindow",function(){m.window&&(m.window.close(),Object(g.cleanUpWindow)(m.window),delete m.window,delete m.prerenderWindow)}),m.resize(c,u)})},openPrerender:function(){return C.a.try(v.I)},resize:function(){},hide:function(){throw new Error("Can not hide popup")},show:function(){throw new Error("Can not show popup")},delegateOverrides:{openContainer:E.DELEGATE.CALL_DELEGATE,destroyContainer:E.DELEGATE.CALL_DELEGATE,elementReady:E.DELEGATE.CALL_DELEGATE,showContainer:E.DELEGATE.CALL_DELEGATE,showComponent:E.DELEGATE.CALL_DELEGATE,hideContainer:E.DELEGATE.CALL_DELEGATE,hideComponent:E.DELEGATE.CALL_DELEGATE,hide:E.DELEGATE.CALL_DELEGATE,show:E.DELEGATE.CALL_DELEGATE,cancelContainerEvents:E.DELEGATE.CALL_DELEGATE,open:E.DELEGATE.CALL_ORIGINAL,loadUrl:E.DELEGATE.CALL_ORIGINAL,createPrerenderTemplate:E.DELEGATE.CALL_ORIGINAL,destroyComponent:E.DELEGATE.CALL_ORIGINAL,resize:E.DELEGATE.CALL_ORIGINAL,renderTemplate:E.DELEGATE.CALL_ORIGINAL,openContainerFrame:E.DELEGATE.CALL_ORIGINAL,getOutlet:E.DELEGATE.CALL_ORIGINAL},loadUrl:function(e){if(Object(p.isSameDomain)(this.window))try{if(this.window.location&&this.window.location.replace)return void this.window.location.replace(e)}catch(e){}this.window.location=e}},v.y.props=v.y.props||{},v.y.windows=v.y.windows||{};var R,k,W,M=(x=j=function(i){function n(e,n,t){var r,o=t.props;(r=i.call(this)||this).html=void 0,r.context=void 0,r.props=void 0,r.childWindowName=void 0,r.onInit=void 0,r.window=void 0,r.handledErrors=void 0,r.container=void 0,r.element=void 0,r.outlet=void 0,r.iframe=void 0,r.prerenderIframe=void 0,r.prerenderWindow=void 0,r.childExports=void 0,r.timeout=void 0,r.component=e,r.validateParentDomain(),r.context=n;try{r.setProps(o)}catch(e){throw o.onError&&o.onError(e),e}return r.props.logLevel&&Object(v.S)(r.props.logLevel),r.childWindowName=r.buildChildWindowName({renderTo:window}),r.registerActiveComponent(),r.component.log("construct_parent"),r.watchForUnload(),r.onInit=new C.a,r.onInit.catch(function(e){return r.error(e)}),r}Object(a.a)(n,i);var e=n.prototype;return e.render=function(n,t){var r=this;return void 0===t&&(t=!0),this.tryInit(function(){r.component.log("render_"+r.context,{context:r.context,element:n,loadUrl:Object(v.W)(t)});var e={};return e.onRender=r.props.onRender(),e.getDomain=r.getDomain(),e.elementReady=C.a.try(function(){if(n)return r.elementReady(n)}),e.openContainer=e.elementReady.then(function(){return r.openContainer(n)}),e.showContainer=e.openContainer.then(function(){return r.showContainer()}),e.openPrerender=e.openContainer.then(function(){return r.openPrerender()}),e.switchPrerender=C.a.all([e.openPrerender,r.onInit]).then(function(){return r.switchPrerender()}),e.open=r.driver.openOnClick?r.open():e.openContainer.then(function(){return r.open()}),e.listen=C.a.all([e.getDomain,e.open]).then(function(e){var n=e[0];r.listen(r.window,n)}),e.watchForClose=e.open.then(function(){return r.watchForClose()}),e.linkDomain=C.a.all([e.getDomain,e.open]).then(function(e){var n=e[0];if(g.bridge&&"string"==typeof n)return g.bridge.linkUrl(r.window,n)}),r.html||(e.createPrerenderTemplate=e.openPrerender.then(function(){return r.createPrerenderTemplate()}),e.showComponent=e.createPrerenderTemplate.then(function(){return r.showComponent()})),e.openBridge=C.a.all([e.getDomain,e.open]).then(function(e){var n=e[0];return r.openBridge("string"==typeof n?n:null)}),r.html?e.loadHTML=e.open.then(function(){return r.loadHTML()}):t&&(e.buildUrl=r.buildUrl(),e.loadUrl=C.a.all([e.buildUrl,e.open,e.linkDomain,e.listen,e.open,e.openBridge,e.createPrerenderTemplate]).then(function(e){var n=e[0];return r.loadUrl(n)}),e.runTimeout=e.loadUrl.then(function(){return r.runTimeout()})),C.a.hash(e)}).then(function(){return r.props.onEnter()}).then(function(){return r})},e.getOutlet=function(){var e=document.createElement("div");return Object(v.a)(e,E.CLASS_NAMES.OUTLET),e},e.validateParentDomain=function(){var e=Object(p.getDomain)();if(!Object(p.matchDomain)(this.component.allowedParentDomains,e))throw new _.c("Can not be rendered by domain: "+e)},e.renderTo=function(e,n){var t=this;return this.tryInit(function(){if(e===window)return t.render(n);if(!Object(p.isSameTopWindow)(window,e))throw new Error("Can only renderTo an adjacent frame");if(n&&"string"!=typeof n)throw new Error("Element passed to renderTo must be a string selector, got "+typeof n+" "+n);return t.checkAllowRenderTo(e),t.component.log("render_"+t.context+"_to_win",{element:Object(v.W)(n),context:t.context}),t.childWindowName=t.buildChildWindowName({renderTo:e}),t.delegate(e),t.render(n)})},e.prefetch=function(){var e=this;return C.a.try(function(){e.html=e.buildUrl().then(function(n){return Object(v.N)(n).then(function(e){return'\n                        <base href="'+n.split("/").slice(0,3).join("/")+'">\n\n                        '+e+"\n\n                        <script>\n                            if (window.history && window.history.pushState) {\n                                window.history.pushState({}, '', '/"+n.split("/").slice(3).join("/")+"');\n                            }\n                        <\/script>\n                    "})})})},e.loadHTML=function(){var n=this;return C.a.try(function(){if(!n.html)throw new Error("Html not prefetched");return n.html.then(function(e){return Object(v.eb)(n.window,e)})})},e.checkAllowRenderTo=function(e){if(!e)throw this.component.createError("Must pass window to renderTo");if(!Object(p.isSameDomain)(e)){var n=Object(p.getDomain)(),t=this.component.getDomain(null,this.props.env);if(!t)throw new Error("Could not determine domain to allow remote render");if(!Object(p.matchDomain)(t,n))throw new Error("Can not render remotely to "+t.toString()+" - can only render to "+n)}},e.registerActiveComponent=function(){var e=this;n.activeComponents.push(this),this.clean.register(function(){n.activeComponents.splice(n.activeComponents.indexOf(e),1)})},e.getComponentParentRef=function(e){if(void 0===e&&(e=window),this.context===E.CONTEXT_TYPES.POPUP)return{ref:E.WINDOW_REFERENCES.OPENER};if(e===window)return Object(p.isTop)(window)?{ref:E.WINDOW_REFERENCES.TOP}:{ref:E.WINDOW_REFERENCES.PARENT,distance:Object(p.getDistanceFromTop)(window)};var n=Object(v.ab)();return v.y.windows[n]=window,this.clean.register(function(){delete v.y.windows[n]}),{ref:E.WINDOW_REFERENCES.GLOBAL,uid:n}},e.getRenderParentRef=function(e){if(void 0===e&&(e=window),e===window)return this.getComponentParentRef(e);var n=Object(v.ab)();return v.y.windows[n]=e,this.clean.register(function(){delete v.y.windows[n]}),{ref:E.WINDOW_REFERENCES.GLOBAL,uid:n}},e.buildChildWindowName=function(e){var n=(void 0===e?{}:e).renderTo,t=void 0===n?window:n,r=Object(p.isSameDomain)(t),o=Object(v.ab)(),i=this.component.tag,a=Object(v.R)(this.getPropsForChild()),c=this.getComponentParentRef(t),s=this.getRenderParentRef(t),u=r||this.component.unsafeRenderTo?{type:E.INITIAL_PROPS.RAW,value:a}:{type:E.INITIAL_PROPS.UID,uid:o};return u.type===E.INITIAL_PROPS.UID&&(v.y.props[o]=JSON.stringify(a),this.clean.register(function(){delete v.y.props[o]})),function(e,n,t){void 0===t&&(t={}),t.id=Object(v.ab)(),t.domain=Object(p.getDomain)(window);var r,o=f(e),i=f(n),a=(r=JSON.stringify(t),d.a.encode(r).replace(/\=/g,"").toLowerCase());if(!o)throw new Error("Invalid name: "+e+" - must contain alphanumeric characters");if(!i)throw new Error("Invalid version: "+n+" - must contain alphanumeric characters");return["xcomponent",o,i,a,""].join("__")}(this.component.name,this.component.version,{uid:o,tag:i,componentParent:c,renderParent:s,props:u})},e.sendToParent=function(e,n){if(!b())throw new Error("Can not find parent component window to message");return this.component.log("send_to_parent_"+e),Object(g.send)(b(),e,n,{domain:m()})},e.setProps=function(e,n){void 0===n&&(n=!0),function(e,n,t){if(void 0===t&&(t=!0),(n=n||{}).env&&"object"==typeof e.url&&!e.url[n.env])throw new Error("Invalid env: "+n.env);for(var r=0,o=e.getPropNames();r<o.length;r++){var i=o[r],a=e.getProp(i);if(a.alias&&n.hasOwnProperty(a.alias)){var c=n[a.alias];delete n[a.alias],n[i]||(n[i]=c)}}for(var s=0,u=Object.keys(n);s<u.length;s++){var d=u[s],f=e.getProp(d),l=n[d];f&&D(f,d,l,n,t)}for(var p=0,h=e.getPropNames();p<h.length;p++){var m=h[p],w=e.getProp(m),g=n[m];w&&!n.hasOwnProperty(m)&&D(w,m,g,n,t)}}(this.component,e,n),this.component.validate&&this.component.validate(this.component,e),this.props=this.props||{},Object(v.t)(this.props,function(e,n,t){var r={};t=t||{};for(var o=0,i=Object.keys(t);o<i.length;o++){var a=i[o];-1!==e.getPropNames().indexOf(a)?r[a]=N(e,n,t,a,t[a]):r[a]=t[a]}for(var c=0,s=e.getPropNames();c<s.length;c++){var u=s[c];if(!(t.hasOwnProperty(u)||n.props&&n.props.hasOwnProperty(u))){var d=N(e,n,t,u,t[u]);void 0!==d&&(r[u]=d)}}return r}(this.component,this,e))},e.buildUrl=function(){var e,n,u,r=this,t=this.props.url;return C.a.all([t,(e=Object(w.a)({},this.component.props,this.component.builtinProps),n=this.props,u={},C.a.all(Object.keys(n).map(function(c){var s=e[c];if(s)return C.a.resolve().then(function(){var e=n[c];if(e&&s.queryParam)return e}).then(function(e){var n,t,r,o,i;if(e)return C.a.all([(r=s,o=c,i=e,C.a.try(function(){return"function"==typeof r.queryParam?r.queryParam(i):"string"==typeof r.queryParam?r.queryParam:o})),(n=s,t=e,C.a.try(function(){return"function"==typeof n.queryValue?n.queryValue(t):t}))]).then(function(e){var n,t=e[0],r=e[1];if("boolean"==typeof r)n="1";else if("string"==typeof r)n=r.toString();else{if("function"==typeof r)return;if("object"==typeof r&&null!==r){if("json"!==s.serialization){n=Object(v.o)(r,c);for(var o=0,i=Object.keys(n);o<i.length;o++){var a=i[o];u[a]=n[a]}return}n=JSON.stringify(r)}else"number"==typeof r&&(n=r.toString())}u[t]=n})})})).then(function(){return Object.keys(u).forEach(function(e){u[e]=escape(u[e])}),u}))]).then(function(e){var n=e[0],t=e[1];return n&&!r.component.getValidDomain(n)?n:C.a.try(function(){return n||r.component.getUrl(r.props.env,r.props)}).then(function(e){return t.xcomponent="1",Object(v.u)(e,{query:t})})})},e.getDomain=function(){var n=this;return C.a.try(function(){return n.props.url}).then(function(e){return n.component.getDomain(e,n.props.env)||(n.component.buildUrl?C.a.try(function(){return n.component.buildUrl(n.props)}).then(function(e){return n.component.getDomain(e,n.props.env)}):void 0)}).then(function(e){if(!e)throw new Error("Could not determine domain");return e})},e.getPropsForChild=function(){for(var e={},n=0,t=Object.keys(this.props);n<t.length;n++){var r=t[n],o=this.component.getProp(r);o&&!1===o.sendToChild||(e[r]=this.props[r])}return e},e.updateProps=function(e){var n=this;return this.setProps(e,!1),this.onInit.then(function(){if(n.childExports)return n.childExports.updateProps(n.getPropsForChild());throw new Error("Child exports were not available")})},e.openBridge=function(o){var i=this;return C.a.try(function(){if(g.bridge&&i.driver.needsBridge){var e={win:i.window};o&&(e.domain=o);var n=g.bridge.needsBridge(e),t=i.component.getBridgeUrl(i.props.env);if(t){t=Object(v.u)(t,{query:{version:i.component.version}});var r=i.component.getBridgeDomain(i.props.env);if(!r)throw new Error("Can not determine domain for bridge");return n?g.bridge.openBridge(t,r).then(function(e){if(e)return e}):void 0}if(n&&o&&!g.bridge.hasBridge(o,o))throw new Error("Bridge url needed to render "+i.context)}})},e.open=function(){var e=this;return C.a.try(function(){return e.component.log("open_"+e.context,{windowName:e.childWindowName}),e.driver.open.call(e)})},e.openPrerender=function(){var e=this;return C.a.try(function(){if(e.component.prerenderTemplate)return e.driver.openPrerender.call(e)})},e.switchPrerender=function(){var e=this;return C.a.try(function(){if(e.prerenderWindow&&e.driver.switchPrerender)return e.driver.switchPrerender.call(e)})},e.elementReady=function(e){return Object(v.p)(e).then(v.I)},e.delegate=function(e){var t=this;this.component.log("delegate_"+this.context);for(var n={uid:this.props.uid,dimensions:this.props.dimensions,onClose:this.props.onClose,onDisplay:this.props.onDisplay},r=0,o=this.component.getPropNames();r<o.length;r++){var i=o[r];this.component.getProp(i).allowDelegate&&(n[i]=this.props[i])}for(var c=Object(g.send)(e,E.POST_MESSAGE.DELEGATE+"_"+this.component.name,{context:this.context,env:this.props.env,options:{context:this.context,childWindowName:this.childWindowName,props:n,overrides:{focus:function(){return t.focus()},userClose:function(){return t.userClose()},getDomain:function(){return t.getDomain()},error:function(e){return t.error(e)},on:function(e,n){return t.on(e,n)}}}}).then(function(e){var n=e.data;return t.clean.register(n.destroy),n}).catch(function(e){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+Object(v.X)(e))}),s=this.driver.delegateOverrides,a=function(e,n){var o=n[e],i=s[o];if(i===E.DELEGATE.CALL_ORIGINAL)return"continue";var a=t[o];t[o]=function(){var t=this,r=arguments;return c.then(function(e){var n=e.overrides[o];if(i===E.DELEGATE.CALL_DELEGATE)return n.apply(t,r);if("function"==typeof i)return i(a,n).apply(t,r);throw new Error("Expected delgate to be CALL_ORIGINAL, CALL_DELEGATE, or factory method")})}},u=0,d=Object.keys(s);u<d.length;u++)a(u,d)},e.watchForClose=function(){var e=this,n=Object(p.onCloseWindow)(this.window,function(){return e.component.log("detect_close_child"),C.a.try(function(){return e.props.onClose(E.CLOSE_REASONS.CLOSE_DETECTED)}).finally(function(){return e.destroy()})},3e3);this.clean.register("destroyCloseWindowListener",n.cancel)},e.watchForUnload=function(){var e=this,n=Object(v.L)(function(){e.component.log("navigate_away"),Object(c.c)(),e.destroyComponent()}),t=Object(v.b)(window,"unload",n);this.clean.register("destroyUnloadWindowListener",t.cancel)},e.loadUrl=function(n){var t=this;return C.a.try(function(){var e;return t.component.log("load_url"),window.location.href.split("#")[0]===n.split("#")[0]&&(n=Object(v.u)(n,{query:(e={},e[Object(v.ab)()]="1",e)})),t.driver.loadUrl.call(t,n)})},e.hijack=function(e){e.target=this.childWindowName},e.runTimeout=function(){var n=this,t=this.props.timeout;if(t){var e=this.timeout=setTimeout(function(){n.component.log("timed_out",{timeout:t.toString()});var e=n.component.createError("Loading component timed out after "+t+" milliseconds");n.onInit.reject(e),n.props.onTimeout(e)},t);this.clean.register(function(){clearTimeout(e),delete n.timeout})}},e.listeners=function(){var e;return(e={})[E.POST_MESSAGE.INIT]=function(e,n){return this.childExports=n.exports,this.onInit.resolve(this),this.timeout&&clearTimeout(this.timeout),{props:this.getPropsForChild(),context:this.context}},e[E.POST_MESSAGE.CLOSE]=function(e,n){this.close(n.reason)},e[E.POST_MESSAGE.CHECK_CLOSE]=function(){this.checkClose()},e[E.POST_MESSAGE.RESIZE]=function(e,n){var t=this;return C.a.try(function(){if(t.driver.allowResize)return t.resize(n.width,n.height)})},e[E.POST_MESSAGE.ONRESIZE]=function(){this.event.trigger("resize")},e[E.POST_MESSAGE.HIDE]=function(){this.hide()},e[E.POST_MESSAGE.SHOW]=function(){this.show()},e[E.POST_MESSAGE.ERROR]=function(e,n){this.error(new Error(n.error))},e},e.resize=function(n,t,e){var r=this,o=(void 0===e?{}:e).waitForTransition,i=void 0===o||o;return C.a.try(function(){var e;if(r.component.log("resize",{height:Object(v.W)(t),width:Object(v.W)(n)}),r.driver.resize.call(r,n,t),i&&(r.element||r.iframe))return r.element&&(e=Object(v.T)(r.element,"hidden")),Object(v.q)(r.element||r.iframe).then(function(){e&&e.reset()})})},e.hide=function(){return this.container&&Object(v.A)(this.container),this.driver.hide.call(this)},e.show=function(){return this.container&&Object(v.V)(this.container),this.driver.show.call(this)},e.checkClose=function(){var e=this,n=Object(p.onCloseWindow)(this.window,function(){e.userClose()},50,500);this.clean.register(n.cancel)},e.userClose=function(){return this.close(E.CLOSE_REASONS.USER_CLOSED)},e.close=function(e){var n=this;return void 0===e&&(e=E.CLOSE_REASONS.PARENT_CALL),C.a.try(function(){return n.component.log("close",{reason:e}),n.event.triggerOnce(E.EVENTS.CLOSE),n.props.onClose(e)}).then(function(){return C.a.all([n.closeComponent(),n.closeContainer()])}).then(function(){return n.destroy()})},e.closeContainer=function(e){var n=this;return void 0===e&&(e=E.CLOSE_REASONS.PARENT_CALL),C.a.try(function(){return n.event.triggerOnce(E.EVENTS.CLOSE),n.props.onClose(e)}).then(function(){return C.a.all([n.closeComponent(e),n.hideContainer()])}).then(function(){return n.destroyContainer()})},e.destroyContainer=function(){var e=this;return C.a.try(function(){e.clean.run("destroyContainerEvents"),e.clean.run("destroyContainerTemplate")})},e.closeComponent=function(e){var n=this;void 0===e&&(e=E.CLOSE_REASONS.PARENT_CALL);var t=this.window;return C.a.try(function(){return n.cancelContainerEvents()}).then(function(){return n.event.triggerOnce(E.EVENTS.CLOSE),n.props.onClose(e)}).then(function(){return n.hideComponent()}).then(function(){return n.destroyComponent()}).then(function(){n.childExports&&n.context===E.CONTEXT_TYPES.POPUP&&!Object(p.isWindowClosed)(t)&&n.childExports.close().catch(v.I)})},e.destroyComponent=function(){this.clean.run("destroyUnloadWindowListener"),this.clean.run("destroyCloseWindowListener"),this.clean.run("destroyContainerEvents"),this.clean.run("destroyWindow")},e.showContainer=function(){var e=this;return C.a.try(function(){if(e.props.onDisplay)return e.props.onDisplay()}).then(function(){if(e.container)return Object(v.U)(e.container,E.ANIMATION_NAMES.SHOW_CONTAINER,e.clean.register)})},e.showComponent=function(){var e=this;return C.a.try(function(){if(e.props.onDisplay)return e.props.onDisplay()}).then(function(){if(e.element)return Object(v.U)(e.element,E.ANIMATION_NAMES.SHOW_COMPONENT,e.clean.register)})},e.hideContainer=function(){var e=this;return C.a.try(function(){return e.container?Object(v.c)(e.container,E.ANIMATION_NAMES.HIDE_CONTAINER,e.clean.register):C.a.resolve()})},e.hideComponent=function(){var e=this;return C.a.try(function(){return e.element?Object(v.c)(e.element,E.ANIMATION_NAMES.HIDE_COMPONENT,e.clean.register):C.a.resolve()})},e.focus=function(){if(!this.window||Object(p.isWindowClosed)(this.window))throw new Error("No window to focus");this.component.log("focus"),this.window.focus()},e.createPrerenderTemplate=function(){var r=this;return C.a.try(function(){return r.component.prerenderTemplate?C.a.try(function(){return r.prerenderIframe?Object(v.e)(r.prerenderIframe).then(function(){return r.prerenderWindow}):r.prerenderWindow}).then(function(e){var n,t;try{n=e.document}catch(e){return}try{t=r.renderTemplate(r.component.prerenderTemplate,{jsxDom:v.F.bind(n),document:n})}catch(e){return r.component.logError("preprender_error",{err:e.stack?e.stack:e.toString()}),void console.error(e.stack?e.stack:e)}try{Object(v.db)(e,t)}catch(e){r.component.logError("preprender_error",{err:e.stack?e.stack:e.toString()}),console.error(e.stack?e.stack:e)}}):C.a.resolve()})},e.renderTemplate=function(e,n){var t=this;void 0===n&&(n={});var r=this.component.dimensions||{},o=r.width,i=void 0===o?E.DEFAULT_DIMENSIONS.WIDTH+"px":o,a=r.height,c=void 0===a?E.DEFAULT_DIMENSIONS.HEIGHT+"px":a;return e.call(this,Object(w.a)({id:E.CLASS_NAMES.ZOID+"-"+this.component.tag+"-"+this.props.uid,props:e.__xdomain__?null:this.props,tag:this.component.tag,context:this.context,outlet:this.getOutlet(),CLASS:E.CLASS_NAMES,ANIMATION:E.ANIMATION_NAMES,CONTEXT:E.CONTEXT_TYPES,EVENT:E.EVENTS,actions:{close:function(){return t.userClose()},focus:function(){return t.focus()}},on:function(e,n){return t.on(e,n)},jsxDom:v.F,document:document,dimensions:{width:i,height:c}},n))},e.openContainer=function(t){var r=this;return C.a.try(function(){var e;if(!(e=t?Object(v.x)(t):document.body))throw new Error("Could not find element to open container into");if(r.component.containerTemplate){var n=r.renderTemplate(r.component.containerTemplate,{container:e});if(r.container=n,Object(v.A)(r.container),Object(v.d)(e,r.container),r.driver.renderedIntoContainerTemplate){if(r.element=r.getOutlet(),Object(v.A)(r.element),!r.element)throw new Error("Could not find element to render component into");Object(v.A)(r.element)}r.clean.register("destroyContainerTemplate",function(){r.container&&r.container.parentNode&&r.container.parentNode.removeChild(r.container),delete r.container})}else if(r.driver.renderedIntoContainerTemplate)throw new Error("containerTemplate needed to render "+r.context)})},e.cancelContainerEvents=function(){this.clean.run("destroyContainerEvents")},e.destroy=function(){var e=this;return C.a.try(function(){if(e.clean.hasTasks())return e.component.log("destroy"),Object(c.c)(),e.clean.all()})},e.tryInit=function(e){var n=this;return C.a.try(e).catch(function(e){n.onInit.reject(e)}).then(function(){return n.onInit})},e.error=function(n){var e=this;return C.a.try(function(){if(e.handledErrors=e.handledErrors||[],-1===e.handledErrors.indexOf(n))return e.handledErrors.push(n),e.onInit.reject(n),e.destroy()}).then(function(){if(e.props.onError)return e.props.onError(n)}).catch(function(e){throw new Error("An error was encountered while handling error:\n\n "+Object(v.X)(n)+"\n\n"+Object(v.X)(e))}).then(function(){if(!e.props.onError)throw n})},n.destroyAll=function(){for(var e=[];n.activeComponents.length;)e.push(n.activeComponents[0].destroy());return C.a.all(e).then(v.I)},P(n,[{key:"driver",get:function(){if(!this.context)throw new Error("Context not set");return I[this.context]}}]),n}(i),j.activeComponents=[],o((L=x).prototype,"getOutlet",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"getOutlet"),L.prototype),o(L.prototype,"prefetch",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"prefetch"),L.prototype),o(L.prototype,"loadHTML",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"loadHTML"),L.prototype),o(L.prototype,"buildUrl",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"buildUrl"),L.prototype),o(L.prototype,"open",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"open"),L.prototype),o(L.prototype,"openPrerender",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"openPrerender"),L.prototype),o(L.prototype,"switchPrerender",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"switchPrerender"),L.prototype),o(L.prototype,"close",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"close"),L.prototype),o(L.prototype,"closeContainer",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"closeContainer"),L.prototype),o(L.prototype,"destroyContainer",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"destroyContainer"),L.prototype),o(L.prototype,"closeComponent",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"closeComponent"),L.prototype),o(L.prototype,"showContainer",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"showContainer"),L.prototype),o(L.prototype,"showComponent",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"showComponent"),L.prototype),o(L.prototype,"hideContainer",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"hideContainer"),L.prototype),o(L.prototype,"hideComponent",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"hideComponent"),L.prototype),o(L.prototype,"createPrerenderTemplate",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"createPrerenderTemplate"),L.prototype),o(L.prototype,"openContainer",[v.H],Object.getOwnPropertyDescriptor(L.prototype,"openContainer"),L.prototype),L),U=function(f){function e(e,n,t){var r;(r=f.call(this)||this).source=void 0,r.context=void 0,r.props=void 0,r.focus=void 0,r.userClose=void 0,r.getDomain=void 0,r.error=void 0,r.on=void 0,r.childWindowName=void 0,r.component=e,r.clean.set("source",n),r.context=t.context,r.props={uid:t.props.uid,dimensions:t.props.dimensions,onClose:t.props.onClose,onDisplay:t.props.onDisplay};for(var o=0,i=e.getPropNames();o<i.length;o++){var a=i[o];r.component.getProp(a).allowDelegate&&(r.props[a]=t.props[a])}r.focus=function(){return t.overrides.focus.call(l(l(r)))},r.clean.register("destroyFocusOverride",function(){r.focus=v.I}),r.userClose=t.overrides.userClose,r.getDomain=t.overrides.getDomain,r.error=t.overrides.error,r.on=t.overrides.on;for(var c=I[t.context].delegateOverrides,s=0,u=Object.keys(c);s<u.length;s++){var d=u[s];r[d]=M.prototype[d]}return r.childWindowName=t.childWindowName,M.prototype.registerActiveComponent.call(l(l(r))),r.watchForClose(),r}Object(a.a)(e,f);var n=e.prototype;return n.watchForClose=function(){var e=this,n=Object(p.onCloseWindow)(this.source,function(){return e.destroy()},3e3);this.clean.register("destroyCloseWindowListener",n.cancel)},n.getOverrides=function(e){for(var n=I[e].delegateOverrides,r={},o=this,t=function(e,n){var t=n[e];r[t]=function(){return M.prototype[t].apply(o,arguments)}},i=0,a=Object.keys(n);i<a.length;i++)t(i,a);return r},n.destroy=function(){return this.clean.all()},P(e,[{key:"driver",get:function(){if(!this.context)throw new Error("Context not set");return I[this.context]}}]),e}(i),B=t(16);function G(e){var n=e.id,t=e.tag,r=e.context,o=e.CLASS,i=e.outlet,a=e.jsxDom,c=e.dimensions,s=c.width,u=c.height;return a("div",{id:n,class:o.ZOID+" "+o.ZOID+"-tag-"+t+" "+o.ZOID+"-context-"+r},a("style",null,"\n                    #"+n+", #"+n+" > ."+o.OUTLET+" {\n                        width: "+s+";\n                        height: "+u+";\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" {\n                        display: inline-block;\n                        position: relative;\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" > iframe {\n                        height: 100%;\n                        width: 100%;\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        transition: opacity .2s ease-in-out;\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" > iframe."+o.VISIBLE+" {\n                        opacity: 1;\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" > iframe."+o.INVISIBLE+" {\n                        opacity: 0;\n                    }\n                "),i)}function F(e){var n=e.jsxDom;return n("html",null,n("head",null,n("style",null,"\n                        html, body {\n                            width: 100%;\n                            height: 100%;\n                            overflow: hidden;\n                            top: 0;\n                            left: 0;\n                            margin: 0;\n                            text-align: center;\n                        }\n\n                        .spinner {\n                            position: absolute;\n                            max-height: 60vmin;\n                            max-width: 60vmin;\n                            height: 40px;\n                            width: 40px;\n                            top: 50%;\n                            left: 50%;\n                            transform: translateX(-50%) translateY(-50%);\n                            z-index: 10;\n                        }\n\n                        .spinner .loader {\n                            height: 100%;\n                            width: 100%;\n                            box-sizing: border-box;\n                            border: 3px solid rgba(0, 0, 0, .2);\n                            border-top-color: rgba(33, 128, 192, 0.8);\n                            border-radius: 100%;\n                            animation: rotation .7s infinite linear;\n\n                        }\n\n                        @keyframes rotation {\n                            from {\n                                transform: rotate(0deg)\n                            }\n                            to {\n                                transform: rotate(359deg)\n                            }\n                        }\n                    ")),n("body",null,n("div",{class:"spinner"},n("div",{id:"loader",class:"loader"}))))}var z={angular:B.angular,angular2:B.angular2,glimmer:B.glimmer,react:B.react,vue:B.vue,script:B.script},H=(W=k=function(t){function r(e){var n;if((n=t.call(this)||this).name=void 0,n.looseProps=void 0,n.tag=void 0,n.url=void 0,n.domain=void 0,n.bridgeUrl=void 0,n.bridgeDomain=void 0,n.props=void 0,n.builtinProps=void 0,n.dimensions=void 0,n.scrolling=void 0,n.autoResize=void 0,n.listenForResize=void 0,n.defaultLogLevel=void 0,n.allowedParentDomains=void 0,n.version=void 0,n.defaultEnv=void 0,n.buildUrl=void 0,n.contexts=void 0,n.defaultContext=void 0,n.containerTemplate=void 0,n.prerenderTemplate=void 0,n.validate=void 0,n.unsafeRenderTo=void 0,n.driverCache=void 0,n.xchild=void 0,n.xprops=void 0,function(e){if(!e)throw new Error("Expecred options to be passed");if(!e.tag||!e.tag.match(/^[a-z0-9-]+$/))throw new Error("Invalid options.tag: "+e.tag);if(function(e){if(e.props&&"object"!=typeof e.props)throw new Error("Expected options.props to be an object");if(e.props)for(var n=0,t=Object.keys(e.props);n<t.length;n++){var r=t[n],o=e.props[r];if(!o||"object"!=typeof o)throw new Error("Expected options.props."+r+" to be an object");if(!o.type)throw new Error("Expected prop.type");if(-1===E.PROP_TYPES_LIST.indexOf(o.type))throw new Error("Expected prop.type to be one of "+E.PROP_TYPES_LIST.join(", "));if(o.required&&o.def)throw new Error("Required prop can not have a default value")}}(e),e.dimensions){if(e.dimensions&&!Object(v.E)(e.dimensions.width)&&!Object(v.D)(e.dimensions.width))throw new Error("Expected options.dimensions.width to be a px or % string value");if(e.dimensions&&!Object(v.E)(e.dimensions.height)&&!Object(v.D)(e.dimensions.height))throw new Error("Expected options.dimensions.height to be a px or % string value")}if(e.contexts){e.contexts.popup;for(var n=!1,t=0,r=Object.keys(e.contexts);t<r.length;t++){var o=r[t];if(-1===E.CONTEXT_TYPES_LIST.indexOf(o))throw new Error("Unsupported context type: "+o);(e.contexts&&e.contexts[o]||e.contexts&&void 0===e.contexts[o])&&(n=!0)}if(!n)throw new Error("No context type is enabled")}if(e.defaultContext){if(-1===E.CONTEXT_TYPES_LIST.indexOf(e.defaultContext))throw new Error("Unsupported context type: "+(e.defaultContext||"unknown"));if(e.contexts&&e.defaultContext&&!e.contexts[e.defaultContext])throw new Error("Disallowed default context type: "+(e.defaultContext||"unknown"))}if(e.url&&e.buildUrl)throw new Error("Can not pass both options.url and options.buildUrl");if(e.defaultEnv){if("string"!=typeof e.defaultEnv)throw new TypeError("Expected options.defaultEnv to be a string");if(!e.buildUrl&&"object"!=typeof e.url)throw new Error("Expected options.url to be an object mapping env->url");if(e.url&&"object"==typeof e.url&&!e.url[e.defaultEnv])throw new Error("No url found for default env: "+e.defaultEnv)}if(e.url&&"object"==typeof e.url){if(!e.defaultEnv)throw new Error("Must pass options.defaultEnv with env->url mapping");for(var i=0,a=Object.keys(e.url);i<a.length;i++){var c=a[i];if(!e.url[c])throw new Error("No url specified for env: "+c)}}if(e.prerenderTemplate&&"function"!=typeof e.prerenderTemplate)throw new Error("Expected options.prerenderTemplate to be a function");if(e.containerTemplate&&"function"!=typeof e.containerTemplate)throw new Error("Expected options.containerTemplate to be a function")}(e),n.addProp(e,"tag"),n.addProp(e,"defaultLogLevel","info"),n.addProp(e,"allowedParentDomains",E.WILDCARD),Object(v.S)(n.defaultLogLevel),r.components[n.tag])throw new Error("Can not register multiple components with the same tag");return n.addProp(e,"name",n.tag.replace(/-/g,"_")),n.builtinProps={env:{type:"string",required:!1,queryParam:!0,def:function(){return this.defaultEnv}},uid:{type:"string",def:function(){return Object(v.ab)()},queryParam:!0},logLevel:{type:"string",required:!1,queryParam:!0,def:function(){return this.defaultLogLevel}},url:{type:"string",required:!1,promise:!0,sendToChild:!1},dimensions:{type:"object",required:!1},version:{type:"string",required:!1,queryParam:!0,def:function(){return this.version}},timeout:{type:"number",required:!1,sendToChild:!1},onDisplay:{type:"function",required:!1,noop:!0,promisify:!0,memoize:!0,sendToChild:!1},onEnter:{type:"function",required:!1,noop:!0,promisify:!0,sendToChild:!1},onRender:{type:"function",required:!1,noop:!0,promisify:!0,sendToChild:!1},onClose:{type:"function",required:!1,noop:!0,once:!0,promisify:!0,sendToChild:!1},onTimeout:{type:"function",required:!1,memoize:!0,promisify:!0,sendToChild:!1,def:function(){return function(e){if(this.props.onError)return this.props.onError(e);throw e}}},onError:{type:"function",required:!1,promisify:!0,sendToChild:!0,once:!0,def:function(){return function(e){setTimeout(function(){throw e})}}}},n.props=e.props||{},e.props||(n.looseProps=!0),n.addProp(e,"dimensions"),n.addProp(e,"scrolling"),n.addProp(e,"listenForResize"),n.addProp(e,"version","latest"),n.addProp(e,"defaultEnv"),n.addProp(e,"buildUrl"),n.addProp(e,"url"),n.addProp(e,"domain"),n.addProp(e,"bridgeUrl"),n.addProp(e,"bridgeDomain"),n.addProp(e,"attributes",{}),n.addProp(e,"contexts",{iframe:!0,popup:!1}),n.addProp(e,"defaultContext"),n.addProp(e,"autoResize",!1),n.addProp(e,"containerTemplate",G),n.addProp(e,"prerenderTemplate",F),n.addProp(e,"validate"),n.addProp(e,"unsafeRenderTo",!1),r.components[n.tag]=l(l(n)),n.registerDrivers(),n.registerChild(),n.listenDelegate(),n}Object(a.a)(r,t);var e=r.prototype;return e.getPropNames=function(){for(var e=Object.keys(this.props),n=0,t=Object.keys(this.builtinProps);n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}return e},e.getProp=function(e){return this.props[e]||this.builtinProps[e]},e.registerDrivers=function(){this.driverCache={};for(var e=0,n=Object.keys(z);e<n.length;e++){var t=n[e];if(0!==t.indexOf("_")){var r=z[t].global();r&&this.driver(t,r)}}},e.driver=function(e,n){if(!z[e])throw new Error("Could not find driver for framework: "+e);return this.driverCache[e]||(this.driverCache[e]=z[e].register(this,n)),this.driverCache[e]},e.registerChild=function(){var e=this;return C.a.try(function(){if(e.isChild())return new S(e)})},e.listenDelegate=function(){var a=this;Object(g.on)(E.POST_MESSAGE.ALLOW_DELEGATE+"_"+this.name,function(){return!0}),Object(g.on)(E.POST_MESSAGE.DELEGATE+"_"+this.name,function(e){var n=e.source,t=e.origin,r=e.data,o=a.getDomain(null,r.env||a.defaultEnv);if(!o)throw new Error("Could not determine domain to allow remote render");if(!Object(p.matchDomain)(o,t))throw new Error("Can not render from "+t+" - expected "+o.toString());var i=a.delegate(n,r.options);return{overrides:i.getOverrides(r.context),destroy:function(){return i.destroy()}}})},e.canRenderTo=function(e){return Object(g.send)(e,E.POST_MESSAGE.ALLOW_DELEGATE+"_"+this.name).then(function(e){return e.data}).catch(function(){return!1})},e.getValidDomain=function(e){if(e){var n=Object(p.getDomainFromUrl)(e);if("string"==typeof this.domain&&n===this.domain)return n;var t=this.domain;if(t&&"object"==typeof t&&!(t instanceof RegExp))for(var r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];if("test"!==i&&n===t[i])return n}}},e.getDomain=function(e,n){var t=this.getForEnv(this.domain,n);if(t)return t;if(t=this.getValidDomain(e))return t;var r=this.getForEnv(this.url,n);return r?Object(p.getDomainFromUrl)(r):e?Object(p.getDomainFromUrl)(e):void 0},e.getBridgeUrl=function(e){return this.getForEnv(this.bridgeUrl,e)},e.getForEnv=function(e,n){if(e){if("string"==typeof e||e instanceof RegExp)return e;if(n||(n=this.defaultEnv),n)return n&&"object"==typeof e&&e[n]?e[n]:void 0}},e.getBridgeDomain=function(e){var n=this.getForEnv(this.bridgeDomain,e);if(n)return n;var t=this.getBridgeUrl(e);return t?Object(p.getDomainFromUrl)(t):void 0},e.getUrl=function(e,n){var t=this.getForEnv(this.url,e);if(t)return t;if(this.buildUrl)return this.buildUrl(n);throw new Error("Unable to get url")},e.isZoidComponent=function(){return u()},e.isChild=function(){return u()&&h().tag===this.tag},e.createError=function(e,n){return new Error("["+(n||this.tag)+"] "+e)},e.init=function(e,n,t){return new M(this,this.getRenderContext(n,t),{props:e})},e.delegate=function(e,n){return new U(this,e,n)},e.validateRenderContext=function(e,n){if(e&&!this.contexts[e])throw new Error("["+this.tag+"] Can not render to "+e);if(!n&&e===E.CONTEXT_TYPES.IFRAME)throw new Error("["+this.tag+"] Context type "+E.CONTEXT_TYPES.IFRAME+" requires an element selector")},e.getDefaultContext=function(){if(this.defaultContext)return this.defaultContext;if(this.contexts[E.CONTEXT_TYPES.IFRAME])return E.CONTEXT_TYPES.IFRAME;if(this.contexts[E.CONTEXT_TYPES.POPUP])return E.CONTEXT_TYPES.POPUP;throw new Error("Can not determine default context")},e.getRenderContext=function(e,n){return e=e||this.getDefaultContext(),this.validateRenderContext(e,n),e},e.render=function(e,n){var t=this;return C.a.try(function(){return new M(t,t.getRenderContext(null,n),{props:e}).render(n)})},e.renderIframe=function(e,n){var t=this;return C.a.try(function(){return new M(t,t.getRenderContext(E.CONTEXT_TYPES.IFRAME,n),{props:e}).render(n)})},e.renderPopup=function(e){var n=this;return C.a.try(function(){return new M(n,n.getRenderContext(E.CONTEXT_TYPES.POPUP),{props:e}).render()})},e.renderTo=function(e,n,t){var r=this;return C.a.try(function(){return new M(r,r.getRenderContext(null,t),{props:n}).renderTo(e,t)})},e.renderIframeTo=function(e,n,t){var r=this;return C.a.try(function(){return new M(r,r.getRenderContext(E.CONTEXT_TYPES.IFRAME,t),{props:n}).renderTo(e,t)})},e.renderPopupTo=function(e,n){var t=this;return C.a.try(function(){return new M(t,t.getRenderContext(E.CONTEXT_TYPES.POPUP),{props:n}).renderTo(e)})},e.prerender=function(e,n){var r=new M(this,this.getRenderContext(null,n),{props:e});return r.prefetch(),{render:function(e,n){return e&&r.updateProps(e),r.render(n)},renderTo:function(e,n,t){return n&&r.updateProps(n),r.renderTo(e,t)},get html(){return r.html},set html(e){r.html=e}}},e.log=function(e,n){void 0===n&&(n={}),Object(v.C)(this.name,e,n)},e.logWarning=function(e,n){Object(v.bb)(this.name,e,n)},e.logError=function(e,n){Object(v.r)(this.name,e,n)},r.getByTag=function(e){return r.components[e]},r}(i),k.components={},o((R=W).prototype,"getPropNames",[v.G],Object.getOwnPropertyDescriptor(R.prototype,"getPropNames"),R.prototype),R);function q(e){return new H(e)}function X(e){return H.getByTag(e)}function Y(){return M.destroyAll()}var V,Z,J=g,K=E,$=t(10),Q=t(17),ee=q({tag:"safepay-button",name:"spbutton",scrolling:!1,defaultEnv:"local",listenForResize:!0,buildUrl:function(e){var n=e.env;return $.a.buttonUrls[n]},contexts:{iframe:!0,popup:!1},containerTemplate:function(e){var n=e.id,t=(e.props,e.CLASS),r=(e.on,e.container,e.tag),o=(e.context,e.outlet),i=e.jsxDom;return i("div",{id:n},i("style",null,"\n                    #"+n+" {\n                        font-size: 0;\n                        width: 100%;\n                    }\n                    #"+n+"."+r+" {\n                        text-align: center;\n                    }\n                    #"+n+" > ."+t.OUTLET+" {\n                        display: inline-block;\n                        min-width: 75px;\n                        max-width: 750px;\n                        position: relative;\n                    }\n                    #"+n+"."+r+" > ."+t.OUTLET+" {\n                        min-width: 75px;\n                    }\n                    #"+n+" > ."+t.OUTLET+" {\n                        width:  200px;\n                        height: 82px;\n                    }\n                     #"+n+"."+r+" > ."+t.OUTLET+" {\n                        width: 100%;\n                    }\n                    #"+n+" > ."+t.OUTLET+" > iframe {\n                        min-width: 100%;\n                        max-width: 100%;\n                        width: 75px;\n                        height: 100%;\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                    }\n                    #"+n+" > ."+t.OUTLET+" > iframe."+t.COMPONENT_FRAME+" {\n                        z-index: 100;\n                    }\n                    #"+n+" > ."+t.OUTLET+" > iframe."+t.PRERENDER_FRAME+" {\n                        transition: opacity .2s linear;\n                        z-index: 200;\n                    }\n                    #"+n+" > ."+t.OUTLET+" > iframe."+t.VISIBLE+" {\n                        opacity: 1;\n                    }\n                    #"+n+" > ."+t.OUTLET+" > iframe."+t.INVISIBLE+" {\n                        opacity: 0;\n                        pointer-events: none;\n                    }\n                "),o)},props:{client:{type:"object",required:!1,def:function(){return{}},validate:function(e,n){var t=n.env||$.a.env;if(!e[t])throw new Error("Client ID not found for env: "+t)}},payment:{type:"function",required:!0,decorate:function(n){return function(){var i=this,e={payment:{create:function(e){var n=i.props,t=n.client,r=n.env,o=t[r];return $.c.payment.create(r,o,e)}}};return this.memoizedToken=C.a.try(n,this,[{},e]),this.memoizedToken=this.memoizedToken.then(function(e){return e}),this.memoizedToken}}},onCancel:{type:"function",required:!1,noop:!0,decorate:function(e){return function(t,r){return e.call(this,t,Object(w.a)({},r,{redirect:function(e,n){return C.a.all([Object(Q.redirect)(e||window.top,n||t.cancelUrl),r.close()])}}))}}},amount:{type:"number",required:!1},onCheckout:{type:"function",required:!1,noop:!0,once:!0,decorate:function(n){return function(e){return n.call(this,e)}}}}}),ne=((V={}).black="white",V.white="black",V),te=q({tag:"safepay-checkout",name:"spcheckout",scrolling:!0,defaultEnv:"local",buildUrl:function(e){var n=e.env||$.a.env;if(!e.payment)throw new Error("Can not build url without payment prop");return e.payment().then(function(e){if(!e)throw new Error("Expected payment id or token to be passed, got "+e);return $.a.checkoutUrls[n]})},contexts:{iframe:!1,popup:!0},get domain(){var e;return Object(w.a)({},$.a.safepayDomains,((e={})[$.b.LOCAL]=/^http:\/\/localhost:\d+$/,e))},get bridgeUrl(){return $.a.metaFrameUrls},defaultContext:"popup",dimensions:{width:"745px",height:"820px"},prerenderTemplate:function(e){var n=e.jsxDom;return n("html",null,n("head",null,n("title",null,"Safepay"),n("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})),n("body",null,n("div",{class:"preloader spinner"},n("style",null,"\n\n    body {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        position: fixed;\n        top: 0;\n        left: 0;\n        margin: 0;\n    }\n\n    .spinner {\n        height: 100%;\n        width: 100%;\n        position: absolute;\n        z-index: 10\n    }\n\n    .spinner .spinWrap {\n        width: 200px;\n        height: 100px;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        margin-left: -100px;\n        margin-top: -50px\n    }\n\n    .spinner .loader,\n    .spinner .spinnerImage {\n        height: 100px;\n        width: 100px;\n        position: absolute;\n        top: 0;\n        left: 50%;\n        opacity: 1;\n        filter: alpha(opacity=100)\n    }\n\n    .spinner .spinnerImage {\n        margin: 28px 0 0 -25px;\n        background: url(https://www.paypalobjects.com/images/checkout/hermes/icon_ot_spin_lock_skinny.png) no-repeat\n    }\n\n    .spinner .loader {\n        margin: 0 0 0 -55px;\n        background-color: transparent;\n        -webkit-animation: rotation 7s infinite linear;\n        -moz-animation: rotation 7s infinite linear;\n        -o-animation: rotation 7s infinite linear;\n        animation: rotation 7s infinite linear;\n        border-left: 5px solid #cbcbca;\n        border-right: 5px solid #cbcbca;\n        border-bottom: 5px solid #cbcbca;\n        border-top: 5px solid #2380be;\n        border-radius: 100%\n    }\n\n    @-webkit-keyframes rotation {\n        from {\n            -webkit-transform: rotate(0deg)\n        }\n        to {\n            -webkit-transform: rotate(359deg)\n        }\n    }\n    @-moz-keyframes rotation {\n        from {\n            -moz-transform: rotate(0deg)\n        }\n        to {\n            -moz-transform: rotate(359deg)\n        }\n    }\n    @-o-keyframes rotation {\n        from {\n            -o-transform: rotate(0deg)\n        }\n        to {\n            -o-transform: rotate(359deg)\n        }\n    }\n    @keyframes rotation {\n        from {\n            transform: rotate(0deg)\n        }\n        to {\n            transform: rotate(359deg)\n        }\n    }\n"),n("div",{class:"spinWrap"},n("p",{class:"spinnerImage"}),n("p",{class:"loader"})))))},containerTemplate:function(e){var n=e.id,t=e.props,r=e.CLASS,o=e.ANIMATION,i=e.CONTEXT,a=e.EVENT,c=e.on,s=e.tag,u=e.context,d=e.actions,f=e.outlet,l=e.jsxDom;function p(e){e.preventDefault(),e.stopPropagation(),C.a.try(d.focus).catch(d.close)}var h,m,w,g,v,E,y,b,O,_=(t.style||{}).overlayColor||"black",T=ne[_],S=l("div",{id:n,onClick:p,class:s+"-context-"+u+" safepay-checkout-overlay "+s+"-background-color-"+_+" "+s+"-logo-color-"+T},l("a",{href:"#",class:"safepay-checkout-close",onClick:function(e){e.preventDefault(),e.stopPropagation(),d.close()},"aria-label":"close",role:"button"}),l("div",{class:"safepay-checkout-modal"},l("div",{class:"safepay-checkout-logo"},l("h1",null,"Safepay")),l("div",{class:"safepay-checkout-message"},"Don’t see the secure Safepay browser? We’ll help you re-launch the window to complete your purchase."),l("div",{class:"safepay-checkout-continue"},l("a",{onClick:p,href:"#"},"Click to Continue")),l("div",{class:"safepay-checkout-loader"},l("div",{class:"safepay-spinner"}))),l("div",{class:"safepay-checkout-iframe-container"},f),l("style",null,(m=(h={id:n,tag:s,CONTEXT:i,CLASS:r,ANIMATION:o}).id,v=h.CLASS,E=h.ANIMATION,"\n    #"+m+" {\n      position: absolute;\n      z-index: 2147483647;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      -webkit-transform: translate3d(0, 0, 0);\n      -moz-transform: translate3d(0, 0, 0);\n      -ms-transform: translate3d(0, 0, 0);\n      -o-transform: translate3d(0, 0, 0);\n      transform: translate3d(0, 0, 0);\n    }\n    #"+m+"."+(w=h.tag)+"-background-color-black {\n      background-color: black;\n      background-color: rgba(0, 0, 0, 0.75);\n      background: -webkit-radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.75) 100%);\n      background: -moz-radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.75) 100%);\n      background: -ms-radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.75) 100%);\n      background: radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.75) 100%);\n      color: #fff;\n    }\n    #"+m+"."+w+"-background-color-white {\n      background-color: white;\n      background-color: rgba(255, 255, 255, 0.4);\n      background: -webkit-radial-gradient(50% 50%, ellipse closest-corner, rgba(255, 255, 255,1) 1%, rgba(255, 255, 255,0.4) 100%);\n      background: -moz-radial-gradient(50% 50%, ellipse closest-corner, rgba(255, 255, 255,1) 1%, rgba(255, 255, 255,0.4) 100%);\n      background: -ms-radial-gradient(50% 50%, ellipse closest-corner, rgba(255, 255, 255,1) 1%, rgba(255, 255, 255,0.4) 100%);\n      background: radial-gradient(50% 50%, ellipse closest-corner, rgba(255, 255, 255,1) 1%, rgba(255, 255, 255,0.4) 100%);\n      color: #333;\n    }\n    #"+m+"."+w+"-background-color-black a {\n      color: #fff;\n    }\n    #"+m+"."+w+"-background-color-white a {\n      color: #333;\n    }\n    #"+m+"."+w+"-background-color-black .safepay-checkout-close:before,\n    #"+m+"."+w+"-background-color-black .safepay-checkout-close:after {\n      background-color: #fff;\n    }\n    #"+m+"."+w+"-background-color-white .safepay-checkout-close:before,\n    #"+m+"."+w+"-background-color-white .safepay-checkout-close:after {\n      background-color: #111;\n    }\n    #"+m+"."+w+"-context-"+(g=h.CONTEXT).POPUP+" {\n      cursor: pointer;\n    }\n    #"+m+"."+w+"-context-"+g.POPUP+" {\n      cursor: pointer;\n    }\n    #"+m+" a {\n      text-decoration: none;\n    }\n    #"+m+' .safepay-checkout-modal {\n      font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif;\n      font-size: 14px;\n      text-align: center;\n      -webkit-box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -ms-box-sizing: border-box;\n      box-sizing: border-box;\n      max-width: 350px;\n      top: 50%;\n      left: 50%;\n      position: absolute;\n      transform: translateX(-50%) translateY(-50%);\n      -webkit-transform: translateX(-50%) translateY(-50%);\n      -moz-transform: translateX(-50%) translateY(-50%);\n      -o-transform: translateX(-50%) translateY(-50%);\n      -ms-transform: translateX(-50%) translateY(-50%);\n      cursor: pointer;\n      text-align: center;\n    }\n    #'+m+"."+w+"-loading .safepay-checkout-message, #"+m+"."+w+"-loading .safepay-checkout-continue {\n      display: none;\n    }\n    .safepay-checkout-loader {\n      display: none;\n    }\n    #"+m+"."+w+"-loading .safepay-checkout-loader {\n      display: block;\n    }\n    #"+m+" .safepay-checkout-modal .safepay-checkout-logo {\n      cursor: pointer;\n      margin-bottom: 30px;\n      display: inline-block;\n    }\n    #"+m+" .safepay-checkout-modal .safepay-checkout-logo img {\n      height: 36px;\n    }\n    #"+m+" .safepay-checkout-modal .safepay-checkout-logo img.safepay-checkout-logo-pp {\n      margin-right: 10px;\n    }\n    #"+m+" .safepay-checkout-modal .safepay-checkout-message {\n      font-size: 15px;\n      line-height: 1.5;\n      padding: 10px 0;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-message, #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-continue {\n      display: none;\n    }\n    #"+m+" .safepay-checkout-modal .safepay-checkout-continue {\n      font-size: 15px;\n      line-height: 1.35;\n      padding: 10px 0;\n      font-weight: bold;\n    }\n    #"+m+" .safepay-checkout-modal .safepay-checkout-continue a {\n      border-bottom: 1px solid currentColor;\n    }\n    #"+m+" .safepay-checkout-close {\n      position: absolute;\n      right: 16px;\n      top: 16px;\n      width: 16px;\n      height: 16px;\n      opacity: 0.6;\n    }\n    #"+m+"."+w+"-loading .safepay-checkout-close {\n      display: none;\n    }\n    #"+m+" .safepay-checkout-close:hover {\n      opacity: 1;\n    }\n    #"+m+" .safepay-checkout-close:before, .safepay-checkout-close:after {\n      position: absolute;\n      left: 8px;\n      content: ' ';\n      height: 16px;\n      width: 2px;\n    }\n    #"+m+" .safepay-checkout-close:before {\n      transform: rotate(45deg);\n      -webkit-transform: rotate(45deg);\n      -moz-transform: rotate(45deg);\n      -o-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n    }\n    #"+m+" .safepay-checkout-close:after {\n      transform: rotate(-45deg);\n      -webkit-transform: rotate(-45deg);\n      -moz-transform: rotate(-45deg);\n      -o-transform: rotate(-45deg);\n      -ms-transform: rotate(-45deg);\n    }\n    #"+m+" .safepay-checkout-iframe-container {\n      display: none;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-iframe-container,\n    #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-iframe-container > ."+v.OUTLET+",\n    #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-iframe-container > ."+v.OUTLET+" > iframe {\n      max-height: 95vh;\n      max-width: 95vw;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-iframe-container {\n      display: block;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      min-width: 450px;\n      transform: translate(-50%, -50%);\n      -webkit-transform: translate(-50%, -50%);\n      -moz-transform: translate(-50%, -50%);\n      -o-transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%);\n      transform: translate3d(-50%, -50%, 0);\n      -webkit-transform: translate3d(-50%, -50%, 0);\n      -moz-transform: translate3d(-50%, -50%, 0);\n      -o-transform: translate3d(-50%, -50%, 0);\n      -ms-transform: translate3d(-50%, -50%, 0);\n      border-radius: 10px;\n      overflow: hidden;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" {\n      position: relative;\n      -webkit-transition: all 3s ease;\n      -moz-transition: all 3s ease;\n      -ms-transition: all 3s ease;\n      -o-transition: all 3 ease;\n      transition: all 3s ease;\n      -webkit-animation-duration: 3s;\n      animation-duration: 3s;\n      -webkit-animation-fill-mode: both;\n      animation-fill-mode: both;\n      min-width: 450px;\n      max-width: 450px;\n      width: 450px;\n      height: 535px;\n      background-color: white;\n      overflow: auto;\n      -webkit-overflow-scrolling: touch;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" > iframe {\n      position: absolute;\n      top: 0;\n      left: 0;\n      transition: opacity 4s ease-in-out;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" > iframe."+v.COMPONENT_FRAME+" {\n      z-index: 100;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" > iframe."+v.PRERENDER_FRAME+" {\n      z-index: 200;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" > iframe."+v.VISIBLE+" {\n      opacity: 1;\n      z-index: 200;\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" > iframe."+v.INVISIBLE+" {\n      opacity: 0;\n      z-index: 100;\n    }\n    @media screen and (-ms-high-contrast: active) {\n      #"+m+" .safepay-checkout-close {\n        opacity: 1;\n      }\n      #"+m+" .safepay-checkout-close:before , .safepay-checkout-close:after {\n        background-color: currentColor;\n      }\n    }\n    @media screen and (max-width: 470px) {\n      #"+m+"."+w+"-context-"+g.IFRAME+" .safepay-checkout-iframe-container,\n      #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" {\n        min-width: 100%;\n        min-width: calc(100% - 20px);\n        min-width: -webkit-calc(100% - 20px);\n        min-width: -moz-calc(100% - 20px);\n        min-width: -o-calc(100% - 20px);\n        min-width: -ms-calc(100% - 20px);\n        max-width: 100%;\n        max-width: calc(100% - 20px);\n        max-width: -webkit-calc(100% - 20px);\n        max-width: -moz-calc(100% - 20px);\n        max-width: -o-calc(100% - 20px);\n        max-width: -ms-calc(100% - 20px);\n      }\n    }\n    #"+m+"."+w+"-context-"+g.IFRAME+" ."+v.OUTLET+" iframe {\n      width: 1px;\n      min-width: 100%;\n      height: 100%;\n    }\n    @-webkit-keyframes "+E.SHOW_COMPONENT+" {\n      from {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n        -webkit-transform: scale3d(.3, .3, .3);\n      }\n      to {\n        opacity: 1;\n        transform: scale3d(1, 1, 1);\n        -webkit-transform: scale3d(1, 1, 1);\n      }\n    }\n    @keyframes "+E.SHOW_COMPONENT+" {\n      from {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n        -webkit-transform: scale3d(.3, .3, .3);\n      }\n      to {\n        opacity: 1;\n        transform: scale3d(1, 1, 1);\n        -webkit-transform: scale3d(1, 1, 1);\n      }\n    }\n    @-webkit-keyframes "+E.HIDE_COMPONENT+" {\n      from {\n        transform: scale3d(1, 1, 1);\n        -webkit-transform: scale3d(1, 1, 1);\n      }\n      to {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n        -webkit-transform: scale3d(.3, .3, .3);\n      }\n    }\n    @keyframes "+E.HIDE_COMPONENT+" {\n      from {\n        transform: scale3d(1, 1, 1);\n        -webkit-transform: scale3d(1, 1, 1);\n      }\n      to {\n        opacity: 0;\n        transform: scale3d(.3, .3, .3);\n        -webkit-transform: scale3d(.3, .3, .3);\n      }\n    }\n    .safepay-spinner {\n      height: 30px;\n      width: 30px;\n      display: inline-block;\n      box-sizing: content-box;\n      opacity: 1;\n      filter: alpha(opacity=100);\n      -webkit-animation: rotation .7s infinite linear;\n      -moz-animation: rotation .7s infinite linear;\n      -o-animation: rotation .7s infinite linear;\n      animation: rotation .7s infinite linear;\n      border-left: 8px solid rgba(0, 0, 0, .2);\n      border-right: 8px solid rgba(0, 0, 0, .2);\n      border-bottom: 8px solid rgba(0, 0, 0, .2);\n      border-top: 8px solid #fff;\n      border-radius: 100%\n    }\n    @-webkit-keyframes rotation {\n      from {\n        -webkit-transform: rotate(0deg)\n      }\n      to {\n        -webkit-transform: rotate(359deg)\n      }\n    }\n    @-moz-keyframes rotation {\n      from {\n        -moz-transform: rotate(0deg)\n      }\n      to {\n        -moz-transform: rotate(359deg)\n      }\n    }\n    @-o-keyframes rotation {\n      from {\n        -o-transform: rotate(0deg)\n      }\n      to {\n        -o-transform: rotate(359deg)\n      }\n    }\n    @keyframes rotation {\n      from {\n        transform: rotate(0deg)\n      }\n      to {\n        transform: rotate(359deg)\n      }\n    }\n  "))),A=l("html",null,l("body",null,S));return c(a.CLOSE,function(){S.className+=" "+s+"-loading"}),l("div",{id:n,class:"safepay-checkout-sandbox"},l("style",null,"\n      #"+(b=(y={id:n,ANIMATION:o}).id)+".safepay-checkout-sandbox {\n        display: block;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        width: 100vw;\n        height: 100vh;\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        z-index: 2147483647;\n        -webkit-animation-duration: 1s;\n        animation-duration: 1s;\n        animation-fill-mode:forwards;\n        animation-iteration-count: 1;\n        -webkit-animation-fill-mode:forwards;\n        -webkit-animation-iteration-count: 1;\n      }\n      #"+b+".safepay-checkout-sandbox .safepay-checkout-sandbox-iframe {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n      @-webkit-keyframes "+(O=y.ANIMATION).SHOW_CONTAINER+" {\n        from {\n            opacity: 0;\n        }\n        to {\n            opacity: 1;\n        }\n      }\n      @keyframes "+O.SHOW_CONTAINER+" {\n        from {\n            opacity: 0;\n        }\n        to {\n            opacity: 1;\n        }\n      }\n      @-webkit-keyframes "+O.HIDE_CONTAINER+" {\n        from {\n            opacity: 1;\n        }\n        50% {\n            opacity: 1;\n        }\n        to {\n            opacity: 0;\n        }\n      }\n      @keyframes "+O.HIDE_CONTAINER+" {\n        from {\n            opacity: 1;\n        }\n        50% {\n            opacity: 1;\n        }\n        to {\n            opacity: 0;\n        }\n      }\n  "),l("iframe",{title:"Safepay Checkout Overlay",name:"__safepay_checkout_sandbox_"+n+"__",scrolling:"no",class:"safepay-checkout-sandbox-iframe"},A))},props:{client:{type:"object",required:!1,def:function(){return{}},validate:function(e,n){var t=n.env||$.a.env;if(!e[t])throw new Error("Client ID not found for env: "+t)}},env:{type:"string",required:!1,queryParam:!0,def:function(){return $.a.env},validate:function(e){if(!$.a.safepayDomains[e])throw new Error("Invalid env: "+e)}},payment:{type:"function",required:!0,memoize:!0,promisify:!0,queryParam:function(e){return"beacon"},queryValue:function(e){return e()},childDecorate:function(e){var n=Object(Q.getQueryParam)("beacon");return n?C.a.resolve(n):e},validate:function(e,n){if(!e&&!n.url)throw new Error("Expected either props.payment or props.url to be passed")}},onCancel:{type:"function",required:!1,once:!0,noop:!0,decorate:function(i){return function(t,e){var n=this;void 0===e&&(e={});var r=function(){return C.a.try(function(){if(e.close)return e.close()}).then(function(){return n.closeComponent()})},o=function(e,n){return C.a.all([Object(Q.redirect)(e||window.top,n||t.cancelUrl),r()])};return C.a.try(function(){return i.call(n,t,Object(w.a)({},e,{close:r,redirect:o}))}).finally(function(){n.close()})}}},onCheckout:(Z={type:"function",required:!1},Z.required=!1,Z.noop=!0,Z.once=!0,Z.decorate=function(t){return function(e){var n=this;return C.a.try(function(){return t.call(n,e)}).finally(function(){n.close()})}},Z)}});t.d(n,"Promise",function(){return C.a}),t.d(n,"Button",function(){return ee}),t.d(n,"Checkout",function(){return te})}])});
//# sourceMappingURL=safepay-checkout.js.map
//# sourceMappingURL=safepay-checkout.js.map